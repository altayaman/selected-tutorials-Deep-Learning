<!DOCTYPE html>
<!-- saved from url=(0323)https://disqus.com/embed/comments/?base=default&f=richliao-github-io&t_u=https%3A%2F%2Frichliao.github.io%2F&t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&s_o=default#version=d952d33e35a1c499438fbdfafc2ef715 -->
<html lang="en" dir="ltr" class="js no-touch localstorage sessionstorage contenteditable use-opacity-transitions"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Disqus Comments</title>

    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <style>
        .alert--warning {
            border-radius: 3px;
            padding: 10px 15px;
            margin-bottom: 10px;
            background-color: #FFE070;
            color: #A47703;
        }

        .alert--warning a,
        .alert--warning a:hover,
        .alert--warning strong {
            color: #A47703;
            font-weight: bold;
        }

        .alert--error p,
        .alert--warning p {
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        </style>
    
    <style>
        html {
            overflow: hidden;
        }

        #error {
            display: none;
        }

        .clearfix:after {
            content: "";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        
    </style>

<script src="./cb=gapi.loaded_0" async=""></script><script crossorigin="anonymous" id="bootstrap-script" data-app="lounge" src="./lounge.load.d952d33e35a1c499438fbdfafc2ef715.js"></script><meta http-equiv="Content-Security-Policy" content="script-src https:;"><link rel="stylesheet" href="./lounge.5f04e83cf97ee6a6cf16dc8e296ed78d.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="lounge/main" src="./lounge.bundle.987c6346e2effb8e4f350d48ecf53d13.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="remote/config" src="./config.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ga" src="./ga.js"></script><style id="css_1493012551041"></style><!--<base target="_parent">--><base href="." target="_parent"><link rel="stylesheet" href="./discovery.ec9371c4ef39ecee074c2acf24d5e0e2.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="discovery/main" src="./discovery.bundle.6aa8d068ba5176f85f980f898293fefa.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="fb" src="./sdk.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="gapi" src="./api.js" gapi_processed="true"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head>
<body class="serif">
    

    
    <div id="error" class="alert--error">
        <p>We were unable to load Disqus. If you are a moderator please see our <a href="https://docs.disqus.com/help/83/"> troubleshooting guide</a>. </p>
    </div>

    
    <script type="text/json" id="disqus-forumData">{"session":{"canModerate":false,"audienceSyncVerified":false,"mustVerify":false,"canReply":true,"mustVerifyEmail":false},"features":{},"forum":{"raw_guidelines":null,"twitterName":null,"guidelines":null,"favicon":{"permalink":"https://disqus.com/api/forums/favicons/richliao-github-io.jpg","cache":"//a.disquscdn.com/1492794604/images/favicon-default.png"},"disableDisqusBranding":false,"id":"richliao-github-io","createdAt":"2016-12-26T16:33:35.755869","category":null,"founder":"201007072","daysAlive":0,"installCompleted":false,"pk":"4789097","channel":null,"description":null,"raw_description":null,"permissions":{},"name":"https://richliao.github.io/","language":"en","settings":{"supportLevel":0,"adsDRNativeEnabled":false,"colorScheme":"auto","adsVideoEnabled":false,"adsProductVideoEnabled":false,"adsPositionTopEnabled":false,"ssoRequired":false,"unapproveLinks":false,"adsEnabled":false,"adsProductLinksThumbnailsEnabled":false,"adsProductStoriesEnabled":false,"organicDiscoveryEnabled":true,"allowMedia":true,"disable3rdPartyTrackers":false,"adsProductDisplayEnabled":false,"discoveryMax":false,"discoveryLocked":false,"moderatorText":"","linkAffiliationEnabled":true,"allowAnonPost":false,"hasCustomAvatar":false,"adultContent":false,"promotedDiscoveryEnabled":false,"allowAnonVotes":false,"mustVerify":true,"adsSettingsLocked":false,"mustVerifyEmail":true,"audienceSyncEnabled":false,"typeface":"auto","adsPositionBottomEnabled":false,"mediaembedEnabled":true,"adsProductLinksEnabled":false,"validateAllPosts":false,"discoveryThumbnailsEnabled":false,"isVIP":false,"adsPositionInthreadEnabled":false},"organizationId":3591656,"url":null,"daysThreadAlive":0,"avatar":{"small":{"permalink":"https://disqus.com/api/forums/avatars/richliao-github-io.jpg?size=32","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"large":{"permalink":"https://disqus.com/api/forums/avatars/richliao-github-io.jpg?size=92","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}},"signedUrl":null}}</script>

    
    <script type="text/json" id="disqus-threadData">{"cursor":{"hasPrev":false,"prev":null,"total":28,"hasNext":false,"next":"1:0:0"},"code":0,"response":{"lastModified":1492993893,"posts":[{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hi Richard, \u003cbr>I somehow have a feeling that this is not exactly what is mentioned in the Hierarchical attention network.\u003c/p>\u003cp>Isn't this more close to the model mentioned in the paper:\u003c/p>\u003cp>x = TimeDistributed(Dense(300), input_shape=(self.MAX_SEQUENCE_LENGTH, 392))(concated)\u003cbr>x = TimeDistributed(Activation('tanh'))(x)\u003cbr>x = TimeDistributed(Dense(1))(x)\u003cbr>x = Flatten()(x)\u003cbr>x = Activation('softmax')(x)\u003cbr>x = Reshape((-1,1))(x)\u003cbr>final_model = merge([concated, x], mode = lambda x: K.batch_dot(x[0], x[1], axes=[1,1]), output_shape= lambda x: (x[0][0],x[0][2]))\u003c/p>\u003cp>Let me know what you think.\u003c/p>","id":"3270657221","isHighlighted":false,"author":{"username":"disqus_pkAREIiLgj","about":"","name":"Naman Goyal","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.232124,"profileUrl":"https://disqus.com/by/disqus_pkAREIiLgj/","url":"","reputation":1.232124,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-04-24T00:31:27","id":"249777601","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_pkAREIiLgj.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/disqus_pkAREIiLgj.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_pkAREIiLgj.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-04-24T00:31:33","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hi Richard, \nI somehow have a feeling that this is not exactly what is mentioned in the Hierarchical attention network.\n\nIsn't this more close to the model mentioned in the paper:\n\nx = TimeDistributed(Dense(300), input_shape=(self.MAX_SEQUENCE_LENGTH, 392))(concated)\nx = TimeDistributed(Activation('tanh'))(x)\nx = TimeDistributed(Dense(1))(x)\nx = Flatten()(x)\nx = Activation('softmax')(x)\nx = Reshape((-1,1))(x)\nfinal_model = merge([concated, x], mode = lambda x: K.batch_dot(x[0], x[1], axes=[1,1]), output_shape= lambda x: (x[0][0],x[0][2]))\n\nLet me know what you think.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>how to access call method from l_att? \u003ca href=\"http://disq.us/url?url=http%3A%2F%2Fl_att.call%3Ay4GbPGdkR6wUkDSJurp-rMfAN0I&amp;cuid=4789097\" rel=\"nofollow noopener\">l_att.call\u003c/a> etc.\u003c/p>\u003cp>I am not able to access class objects?\u003c/p>\u003cp>Could you please explain. I want to access l_att.weights?\u003cbr>How to do it? . I would be glad if you can explain me the class objects better. Thanks\u003c/p>","id":"3270425627","isHighlighted":false,"author":{"username":"karthikazhagesan","about":"","name":"Karthik Azhagesan","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.232124,"profileUrl":"https://disqus.com/by/karthikazhagesan/","url":"","reputation":1.232124,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-04-23T21:01:46","id":"249766159","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/karthikazhagesan.jpg","cache":"https://c.disquscdn.com/uploads/users/24976/6159/avatar32.jpg?1492981317"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/karthikazhagesan.jpg","cache":"https://c.disquscdn.com/uploads/users/24976/6159/avatar92.jpg?1492981317","large":{"permalink":"https://disqus.com/api/users/avatars/karthikazhagesan.jpg","cache":"https://c.disquscdn.com/uploads/users/24976/6159/avatar92.jpg?1492981317"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-04-23T21:01:54","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"how to access call method from l_att? l_att.call etc.\n\nI am not able to access class objects? \n\nCould you please explain. I want to access l_att.weights?\nHow to do it? . I would be glad if you can explain me the class objects better. Thanks","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":["links"],"isEdited":true},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hello!\u003cbr>I'm still confused about the Keras' TimeDistributed Wrapper.\u003cbr>May you give me some hints?\u003cbr>Thanks!\u003c/p>","id":"3222644082","isHighlighted":false,"author":{"username":"qijinyin","about":"","name":"Qijin Yin","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.232124,"profileUrl":"https://disqus.com/by/qijinyin/","url":"","reputation":1.232124,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-03-25T08:20:28","id":"246678328","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/qijinyin.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/qijinyin.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/qijinyin.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-25T08:20:47","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hello!\nI'm still confused about the Keras' TimeDistributed Wrapper.\nMay you give me some hints?\nThanks!","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":true},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>It is used as applying the same share weight tensor operation across the time dimension.\u003c/p>","id":"3225056173","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-27T01:01:29","parent":3222644082,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"It is used as applying the same share weight tensor operation across the time dimension.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hello. Thanks for your contributions. When I run your code, I've met the following IndexError. Do you have any idea or solution for that?\u003c/p>\u003cp>  File \"\u003ca href=\"http://disq.us/url?url=http%3A%2F%2FtextClassifierHATT.py%3AWsShFjuD49DAw8QJ_xYYGDXk-Ss&amp;cuid=4789097\" rel=\"nofollow noopener\">textClassifierHATT.py\u003c/a>\", line 194, in &lt;module&gt;\u003cbr>    l_att = AttLayer()(l_dense)\u003cbr>  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\\u003ca href=\"http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097\" rel=\"nofollow noopener\">topology.py\u003c/a>\", line 572, in __call__\u003cbr>    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)\u003cbr>  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\\u003ca href=\"http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097\" rel=\"nofollow noopener\">topology.py\u003c/a>\", line 635, in add_inbound_node\u003cbr>    Node.create_node(self, inbound_layers, node_indices, tensor_indices)\u003cbr>  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\\u003ca href=\"http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097\" rel=\"nofollow noopener\">topology.py\u003c/a>\", line 166, in create_node\u003cbr>    output_tensors = to_list(\u003ca href=\"http://disq.us/url?url=http%3A%2F%2Foutbound_layer.call%3AtWXVWoi5WrgOTjpgAaHCu4ulguM&amp;cuid=4789097\" rel=\"nofollow noopener\">outbound_layer.call\u003c/a>(input_tensors[0], mask=input_masks[0]))\u003cbr>  File \"\u003ca href=\"http://disq.us/url?url=http%3A%2F%2FtextClassifierHATT.py%3AWsShFjuD49DAw8QJ_xYYGDXk-Ss&amp;cuid=4789097\" rel=\"nofollow noopener\">textClassifierHATT.py\u003c/a>\", line 179, in call\u003cbr>    eij = K.tanh(\u003ca href=\"http://disq.us/url?url=http%3A%2F%2FK.dot%3AjNeqVnT17hay0_01p_uFz3ZO3Uw&amp;cuid=4789097\" rel=\"nofollow noopener\">K.dot\u003c/a>(x, self.W))\u003cbr>  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\backend\\\u003ca href=\"http://disq.us/url?url=http%3A%2F%2Ftensorflow_backend.py%3AvZGB_WEWPW0_mryf2MKrOx3W6gs&amp;cuid=4789097\" rel=\"nofollow noopener\">tensorflow_backend.py\u003c/a>\", line 819, in dot\u003cbr>    y_permute_dim = [y_permute_dim.pop(-2)] + y_permute_dim\u003cbr>IndexError: pop index out of range\u003c/p>","id":"3190783089","isHighlighted":false,"author":{"username":"yuchuljung","about":"","name":"Yuchul Jung","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.2324929999999998,"profileUrl":"https://disqus.com/by/yuchuljung/","url":"","reputation":1.2324929999999998,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-03-07T14:36:02","id":"244673257","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar32.jpg?1489366083"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083","large":{"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-07T14:36:12","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hello. Thanks for your contributions. When I run your code, I've met the following IndexError. Do you have any idea or solution for that? \n\n  File \"textClassifierHATT.py\", line 194, in \u003cmodule>\n    l_att = AttLayer()(l_dense)\n  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\topology.py\", line 572, in __call__\n    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)\n  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\topology.py\", line 635, in add_inbound_node\n    Node.create_node(self, inbound_layers, node_indices, tensor_indices)\n  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\engine\\topology.py\", line 166, in create_node\n    output_tensors = to_list(outbound_layer.call(input_tensors[0], mask=input_masks[0]))\n  File \"textClassifierHATT.py\", line 179, in call\n    eij = K.tanh(K.dot(x, self.W))\n  File \"C:\\Anaconda3\\envs\\tensorflow_0.12\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 819, in dot\n    y_permute_dim = [y_permute_dim.pop(-2)] + y_permute_dim\nIndexError: pop index out of range","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I was getting similar error when using some other code. Changing to \"theano\" backed fixed it for me. You might also want to try this.\u003c/p>","id":"3199982033","isHighlighted":false,"author":{"username":"pinkeshbadjatiya","about":"","name":"Pinkesh Badjatiya","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.2374079999999998,"profileUrl":"https://disqus.com/by/pinkeshbadjatiya/","url":"","reputation":1.2374079999999998,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-05-17T15:05:27","id":"208365322","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-12T06:37:41","parent":3190783089,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I was getting similar error when using some other code. Changing to \"theano\" backed fixed it for me. You might also want to try this.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Thanks a lot. It works.\u003c/p>","id":"3201143643","isHighlighted":false,"author":{"username":"yuchuljung","about":"","name":"Yuchul Jung","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.2324929999999998,"profileUrl":"https://disqus.com/by/yuchuljung/","url":"","reputation":1.2324929999999998,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-03-07T14:36:02","id":"244673257","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar32.jpg?1489366083"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083","large":{"permalink":"https://disqus.com/api/users/avatars/yuchuljung.jpg","cache":"https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-13T00:48:02","parent":3199982033,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Thanks a lot. It works.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":2,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hello. Thanks for the post. Not sure but I think there might be a missing detail. The paper proposes a learning context vector u_w. From what I could understand from your Attention class, you just have the learning W. Check this Attention Layer implementation:\u003c/p>\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fcbaziotis%2F7ef97ccf71cbc14366835198c09809d2%3AVxoIkWkdE6fkrKyaPUmfKvXQgUA&amp;cuid=4789097\" rel=\"nofollow noopener\">https://gist.github.com/cba...\u003c/a>\u003c/p>","id":"3173712217","isHighlighted":false,"author":{"username":"disqus_jUviv8aNlX","about":"","name":"Miguel","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.236866,"profileUrl":"https://disqus.com/by/disqus_jUviv8aNlX/","url":"","reputation":1.236866,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2015-07-30T15:56:40","id":"167484071","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_jUviv8aNlX.jpg","cache":"https://c.disquscdn.com/uploads/users/16748/4071/avatar32.jpg?1438271852"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/disqus_jUviv8aNlX.jpg","cache":"https://c.disquscdn.com/uploads/users/16748/4071/avatar92.jpg?1438271852","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_jUviv8aNlX.jpg","cache":"https://c.disquscdn.com/uploads/users/16748/4071/avatar92.jpg?1438271852"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-24T23:59:48","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hello. Thanks for the post. Not sure but I think there might be a missing detail. The paper proposes a learning context vector u_w. From what I could understand from your Attention class, you just have the learning W. Check this Attention Layer implementation:\n\nhttps://gist.github.com/cbaziotis/7ef97ccf71cbc14366835198c09809d2","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I used TimeDistributed(Dense()) layer for the context learning. You can have it all learned in the attention as well\u003c/p>","id":"3174689523","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-25T18:09:01","parent":3173712217,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I used TimeDistributed(Dense()) layer for the context learning. You can have it all learned in the attention as well","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I'm new to Keras, and I couldn't quite figure out how to derive attention wegihts using the K function? Have you completed that part too?\u003cbr>Thanks!\u003c/p>","id":"3167922208","isHighlighted":false,"author":{"username":"aditsanghvi","about":"","name":"adit sanghvi","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.234707,"profileUrl":"https://disqus.com/by/aditsanghvi/","url":"","reputation":1.234707,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2012-08-19T06:44:26","id":"30780825","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar32.jpg?1490372724"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724","large":{"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-21T20:20:30","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I'm new to Keras, and I couldn't quite figure out how to derive attention wegihts using the K function? Have you completed that part too?\nThanks!","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I didn't continue the venue since I'm occupied by other things. And I probably need to pick up my thoughts again before I can comfortably answer your question. My initial thought would be - 1. getting the attention layer input using one forward pass after training 2. saving the model weight in attention layer - you need to see Keras document on how to do it. Hope this help.\u003c/p>","id":"3168489385","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-22T02:51:52","parent":3167922208,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I didn't continue the venue since I'm occupied by other things. And I probably need to pick up my thoughts again before I can comfortably answer your question. My initial thought would be - 1. getting the attention layer input using one forward pass after training 2. saving the model weight in attention layer - you need to see Keras document on how to do it. Hope this help.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Thanks! I'll begin that now and keep you updated when I can visualize.\u003c/p>\u003cp>Another quick question - in the paper the authors say \u003cbr>\"The context vector uw can be seen as a high level representation of a fixed query \u201cwhat is the informative word\u201d over the words like that used in memory networks (Sukhbaatar et al., 2015; Kumar et al., 2015). The word context vector uw is randomly initialized and jointly learned during the training process\"\u003c/p>\u003cp>Here, the self.weights in our Attention layer is the word context right? So this is tied across all reviews, so how does it find out which ones are important in EACH individual review?\u003c/p>\u003cp>I may have misunderstood something..\u003c/p>","id":"3221478688","isHighlighted":false,"author":{"username":"aditsanghvi","about":"","name":"adit sanghvi","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.234707,"profileUrl":"https://disqus.com/by/aditsanghvi/","url":"","reputation":1.234707,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2012-08-19T06:44:26","id":"30780825","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar32.jpg?1490372724"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724","large":{"permalink":"https://disqus.com/api/users/avatars/aditsanghvi.jpg","cache":"https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-24T16:25:22","parent":3168489385,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Thanks! I'll begin that now and keep you updated when I can visualize.\n\nAnother quick question - in the paper the authors say \n\"The context vector uw can be seen as a high level representation of a fixed query \u201cwhat is the informative word\u201d over the words like that used in memory networks (Sukhbaatar et al., 2015; Kumar et al., 2015). The word context vector uw is randomly initialized and jointly learned during the training process\"\n\nHere, the self.weights in our Attention layer is the word context right? So this is tied across all reviews, so how does it find out which ones are important in EACH individual review?\n\nI may have misunderstood something..","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":2,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I haven't been doing this project for a while. But I will go back to it once I have finished other priorities. So do let me know if you or you found others have done the attention visualization part.\u003c/p>\u003cp>Based on my memory, the context vector is timedistributed dense layer I used in my code. The self.weight in my attention layer is THE attention weight. I bet if you remove the context vector there shouldn't be any major performance changes - I could be wrong. It probably just gives you another layer to learn context weighting schema over word vector dimension. I haven't seen other papers use this concept so I haven't thought it through as well.\u003c/p>","id":"3225063720","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-27T01:09:30","parent":3221478688,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I haven't been doing this project for a while. But I will go back to it once I have finished other priorities. So do let me know if you or you found others have done the attention visualization part.\n\nBased on my memory, the context vector is timedistributed dense layer I used in my code. The self.weight in my attention layer is THE attention weight. I bet if you remove the context vector there shouldn't be any major performance changes - I could be wrong. It probably just gives you another layer to learn context weighting schema over word vector dimension. I haven't seen other papers use this concept so I haven't thought it through as well.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":3,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Aren't you missing the bias term in doing the initial linear map to the attention layer?\u003c/p>","id":"3167136552","isHighlighted":false,"author":{"username":"Sandeep42","about":"","name":"Sandeep","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.237973,"profileUrl":"https://disqus.com/by/Sandeep42/","url":"","reputation":1.237973,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-02-29T07:02:59","id":"198572409","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-21T12:06:46","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Aren't you missing the bias term in doing the initial linear map to the attention layer?","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Good call. I think you are right. Thanks for pointing it out.\u003c/p>","id":"3168498527","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-22T02:59:35","parent":3167136552,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Good call. I think you are right. Thanks for pointing it out.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I am trying to implement the same in PyTorch, the bias term is a tough nut to crack, because it needs to be updated in a batch.\u003c/p>","id":"3168642022","isHighlighted":false,"author":{"username":"Sandeep42","about":"","name":"Sandeep","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.237973,"profileUrl":"https://disqus.com/by/Sandeep42/","url":"","reputation":1.237973,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-02-29T07:02:59","id":"198572409","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-22T05:35:45","parent":3168498527,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I am trying to implement the same in PyTorch, the bias term is a tough nut to crack, because it needs to be updated in a batch.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":2,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>How so? I need to revisit the paper to give better answer but my initial thoughts are bias term should be trained in the same scope of self.W, one for sentence and one for document level. They are all updated at batch level - as in my code I'm using 50 reviews in each batch.\u003c/p>","id":"3172294388","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-24T04:13:42","parent":3168642022,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"How so? I need to revisit the paper to give better answer but my initial thoughts are bias term should be trained in the same scope of self.W, one for sentence and one for document level. They are all updated at batch level - as in my code I'm using 50 reviews in each batch.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":3,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>You can have a look at the code here \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2FEdGENetworks%2Fattention-networks-for-classification%3AG9wfwA2FO35NSeF1Vz5OoEVNzsI&amp;cuid=4789097\" rel=\"nofollow noopener\">https://github.com/EdGENetw...\u003c/a>. I added a bias term and made a copy of the same term for the entire batch. Somehow, Pytorch back-propagation failed when I did that. I also think the bias term should be trained along with the batch both at the word level and sentence level.\u003c/p>","id":"3172338526","isHighlighted":false,"author":{"username":"Sandeep42","about":"","name":"Sandeep","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.237973,"profileUrl":"https://disqus.com/by/Sandeep42/","url":"","reputation":1.237973,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-02-29T07:02:59","id":"198572409","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/Sandeep42.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-24T05:08:52","parent":3172294388,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"You can have a look at the code here https://github.com/EdGENetworks/attention-networks-for-classification. I added a bias term and made a copy of the same term for the entire batch. Somehow, Pytorch back-propagation failed when I did that. I also think the bias term should be trained along with the batch both at the word level and sentence level.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":4,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Just start learning pytorch and it seems like pyTorch hasn't implemented the broadcast function like numpy does. You need to use repeat function as a hack for the bias term. See this post: \u003ca href=\"http://disq.us/url?url=http%3A%2F%2Fwiseodd.github.io%2Ftechblog%2F2017%2F01%2F20%2Fgan-pytorch%2F%3AqypwqPH78gvRFheFl_n8gxTrNQc&amp;cuid=4789097\" rel=\"nofollow noopener\">http://wiseodd.github.io/te...\u003c/a>\u003c/p>","id":"3211314966","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-19T03:09:28","parent":3172338526,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Just start learning pytorch and it seems like pyTorch hasn't implemented the broadcast function like numpy does. You need to use repeat function as a hack for the bias term. See this post: http://wiseodd.github.io/techblog/2017/01/20/gan-pytorch/","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":5,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>I found this implementation online by some other author which seemed to work for me. It seems to be considering the bias term as well.\u003cbr>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fcbaziotis%2F6428df359af27d58078ca5ed9792bd6d%3AI49b3VErWq941via0fzM07PAirQ&amp;cuid=4789097\" rel=\"nofollow noopener\">https://gist.github.com/cba...\u003c/a>\u003c/p>","id":"3199984588","isHighlighted":false,"author":{"username":"pinkeshbadjatiya","about":"","name":"Pinkesh Badjatiya","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.2374079999999998,"profileUrl":"https://disqus.com/by/pinkeshbadjatiya/","url":"","reputation":1.2374079999999998,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-05-17T15:05:27","id":"208365322","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/pinkeshbadjatiya.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-03-12T06:41:59","parent":3172338526,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"I found this implementation online by some other author which seemed to work for me. It seems to be considering the bias term as well.\nhttps://gist.github.com/cbaziotis/6428df359af27d58078ca5ed9792bd6d","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":5,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Thanks for detailed post about attention layer.\u003c/p>","id":"3165223463","isHighlighted":false,"author":{"username":"hakan_tekba","about":"","name":"Hakan Tekba\u015f","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.233231,"profileUrl":"https://disqus.com/by/hakan_tekba/","url":"","reputation":1.233231,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-02-16T13:24:24","id":"242491320","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar32.jpg?1487592145"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145","large":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-20T12:00:10","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Thanks for detailed post about attention layer.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":true},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Test\u003c/p>","id":"3161271377","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-17T21:43:55","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Test","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":true},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hi.\u003c/p>\u003cp>when i run \u003cbr>      review_encoder = TimeDistributed(sentEncoder)(review_input)\u003c/p>\u003cp>it says \"Exception: ('Not a Keras tensor:', Reshape{3}.0)\".\u003c/p>\u003cp>Lei can you manage to run code?\u003c/p>","id":"3158028122","isHighlighted":false,"author":{"username":"hakan_tekba","about":"","name":"Hakan Tekba\u015f","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.233231,"profileUrl":"https://disqus.com/by/hakan_tekba/","url":"","reputation":1.233231,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-02-16T13:24:24","id":"242491320","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar32.jpg?1487592145"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145","large":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-16T13:27:53","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hi.\n\nwhen i run \n      review_encoder = TimeDistributed(sentEncoder)(review_input) \n\nit says \"Exception: ('Not a Keras tensor:', Reshape{3}.0)\".\n\nLei can you manage to run code?","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>What Keras version you are running. In the last few months, Keras has been through a lot of rewrite, especially the TimeDistributed and TimeDistributedDense layer. You need to follow the latest API document. My recommendation of these things is always to read these pakcages' source code - no matter Keras or Tensorflow or Theano. That's how each researcher has been through.\u003c/p>","id":"3159624435","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-17T03:11:38","parent":3158028122,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"What Keras version you are running. In the last few months, Keras has been through a lot of rewrite, especially the TimeDistributed and TimeDistributedDense layer. You need to follow the latest API document. My recommendation of these things is always to read these pakcages' source code - no matter Keras or Tensorflow or Theano. That's how each researcher has been through.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>keras version is 1.2.0. I copy your code and didn't change. I dont have any idea why it is throwing this error. Is your keras version same with me?\u003c/p>","id":"3160029822","isHighlighted":false,"author":{"username":"hakan_tekba","about":"","name":"Hakan Tekba\u015f","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.233231,"profileUrl":"https://disqus.com/by/hakan_tekba/","url":"","reputation":1.233231,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-02-16T13:24:24","id":"242491320","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar32.jpg?1487592145"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145","large":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-17T11:14:10","parent":3159624435,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"keras version is 1.2.0. I copy your code and didn't change. I dont have any idea why it is throwing this error. Is your keras version same with me?","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":2,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Hi,\u003c/p>\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Ffchollet%2Fkeras%2Fissues%2F4796%3ANosARfSsKiAYPW7QCWJDFbnnAzc&amp;cuid=4789097\" rel=\"nofollow noopener\">https://github.com/fchollet...\u003c/a>\u003cbr>There is a bug introduced in final version of keras. When i return to previous version, error disappeared.\u003c/p>","id":"3165225355","isHighlighted":false,"author":{"username":"hakan_tekba","about":"","name":"Hakan Tekba\u015f","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.233231,"profileUrl":"https://disqus.com/by/hakan_tekba/","url":"","reputation":1.233231,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2017-02-16T13:24:24","id":"242491320","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar32.jpg?1487592145"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145","large":{"permalink":"https://disqus.com/api/users/avatars/hakan_tekba.jpg","cache":"https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-20T12:02:24","parent":3160029822,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Hi,\n\nhttps://github.com/fchollet/keras/issues/4796\nThere is a bug introduced in final version of keras. When i return to previous version, error disappeared.","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":3,"points":0,"moderationLabels":["links"],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>Nice post!\u003c/p>\u003cp>After reading your attention layer code, I am not very clear about the purposes of using the two Theano dimshuffle functions. Will you please elaborate more. .\u003c/p>","id":"3157612083","isHighlighted":false,"author":{"username":"disqus_YXuQQ7slMS","about":"","name":"Lei Chen","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.233819,"profileUrl":"https://disqus.com/by/disqus_YXuQQ7slMS/","url":"","reputation":1.233819,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2013-11-15T13:47:47","id":"81920675","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_YXuQQ7slMS.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/disqus_YXuQQ7slMS.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_YXuQQ7slMS.jpg","cache":"//a.disquscdn.com/1492794604/images/noavatar92.png"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-16T04:32:16","parent":null,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"Nice post!\n\nAfter reading your attention layer code, I am not very clear about the purposes of using the two Theano dimshuffle functions. Will you please elaborate more. .","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":0,"points":0,"moderationLabels":[],"isEdited":false},{"dislikes":0,"numReports":0,"likes":0,"message":"\u003cp>dimshuffle is similar to numpy broadcast\u003c/p>","id":"3159615602","isHighlighted":false,"author":{"username":"richardliao","about":"","name":"Richard Liao","disable3rdPartyTrackers":false,"isPowerContributor":false,"isAnonymous":false,"rep":1.215536,"profileUrl":"https://disqus.com/by/richardliao/","url":"","reputation":1.215536,"location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"joinedAt":"2016-03-19T16:57:36","id":"201007072","reputationLabel":"Average","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar32.jpg?1490576972"},"isCustom":true,"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972","large":{"permalink":"https://disqus.com/api/users/avatars/richardliao.jpg","cache":"https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972"}}},"media":[],"isSpam":false,"isDeletedByAuthor":false,"createdAt":"2017-02-17T03:08:42","parent":3157612083,"isApproved":true,"isDeleted":false,"isFlagged":false,"raw_message":"dimshuffle is similar to numpy broadcast","canVote":false,"thread":"5412604946","forum":"richliao-github-io","depth":1,"points":0,"moderationLabels":[],"isEdited":false}],"thread":{"feed":"https://richliao-github-io.disqus.com/text_classification_part_i_convolutional_richards_deep_learning_blog/latest.rss","identifiers":[],"dislikes":0,"likes":0,"message":"","id":"5412604946","createdAt":"2016-12-26T21:47:12","category":"6036916","author":"201007072","isSpam":false,"signedLink":"https://disq.us/?url=https%3A%2F%2Frichliao.github.io%2F&key=I0PVc-UbI5QF6AN_lNM_UQ","isDeleted":false,"hasStreaming":false,"raw_message":"","isClosed":false,"link":"https://richliao.github.io/","slug":"text_classification_part_i_convolutional_richards_deep_learning_blog","forum":"richliao-github-io","clean_title":"Text Classification, Part I - convolutional \u2013 Richard's deep learning blog","posts":28,"moderators":[201007072],"title":"Text Classification, Part I - convolutional \u2013 Richard's deep learning blog","highlightedPost":null}},"order":"popular"}</script>

    

    <div id="fixed-content"></div>


    
        
<script type="text/json" id="disqus-urls">{
    "root":"//disqus.com",
    "next":"https://c.disquscdn.com/next/current/embed"
}</script>

        
        <script>!function () {
            var d = document;
            var toH = d.head.appendChild.bind(d.head);

            var v = window.location.href.match(/[#&?]version=([0-9a-f]{32})/);
            var src = 'https://c.disquscdn.com/next/embed/lounge.load';
            if (v)
                src += '.' + v[1];
            src += '.js';

            var s = d.createElement('script');
            s.crossOrigin = 'anonymous';
            s.id = 'bootstrap-script';
            s.setAttribute('data-app', 'lounge');
            s.src = src;
            toH(s);

            var m = d.createElement('meta');
            m.setAttribute('http-equiv', 'Content-Security-Policy');
            m.setAttribute('content', "script-src https:;");
            toH(m);
        }();</script>
    


<script src="./common.bundle.08b03b11c747b79c4d4135b49e2f8725.js"></script><div id="layout" data-tracking-area="layout"><div id="onboard" data-tracking-area="onboard"><div></div></div><div id="highlighted-post" data-tracking-area="highlighted" class="highlighted-post" style="display: none;"></div><div id="global-alert"></div><header id="main-nav" data-tracking-area="main-nav"><nav class="nav nav-primary"><ul><li class="nav-tab nav-tab--primary tab-conversation active" data-role="post-count"><a class="publisher-nav-color"><span class="comment-count">28 comments</span><span class="comment-count-placeholder">Comments</span></a></li><li class="nav-tab nav-tab--primary tab-community"><a href="https://disqus.com/home/forums/richliao-github-io/" class="publisher-nav-color" data-action="community-sidebar" data-forum="richliao-github-io" id="community-tab"><span class="community-name"><strong>https://richliao.github.io/</strong></span><strong class="community-name-placeholder">Community</strong></a></li><li class="nav-tab nav-tab--primary dropdown user-menu" data-role="logout"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="dropdown-toggle" data-toggle="dropdown">
<span class="dropdown-toggle-wrapper">

<span>
Login
</span>

</span> <span class="caret"></span>
</a>
<ul class="dropdown-menu">


<li>
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="auth:disqus">Disqus</a>
</li>
<li>
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="auth:facebook">Facebook</a>
</li>
<li>
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="auth:twitter">Twitter</a>
</li>
<li>
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="auth:google">Google</a>
</li>



</ul>
</li><li class="nav-tab nav-tab--primary notification-menu unread" data-role="notification-menu"><a href="https://disqus.com/home/inbox/" class="notification-container" data-action="home" data-home-path="home/inbox/">
<span class="notification-icon icon-comment" aria-hidden=""></span>
<span class="notification-count" data-role="notification-count">1</span>
</a>
</li></ul></nav></header><section id="conversation" data-role="main" data-tracking-area="main"><div class="nav nav-secondary" data-tracking-area="secondary-nav"><ul><li id="recommend-button" class="nav-tab nav-tab--secondary recommend dropdown"><div class="thread-likes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="recommend" title="Recommend this discussion" class="dropdown-toggle ">
<span class="label label-default"><span class="recommend-icon icon-heart-empty"></span> Recommend</span>
<span class="label label-recommended"><span class="recommend-icon icon-heart"></span> Recommended</span>
</a>
<ul class="dropdown-menu dropdown-menu--coachmark">
<li>
<h2 class="coachmark__heading">Discussion Recommended!</h2>
<p class="coachmark__description">Recommending means this is a discussion worth sharing. It gets shared to your followers' Disqus feeds, and gives the creator kudos!</p>
<a href="https://disqus.com/home/?utm_source=disqus_embed&amp;utm_content=recommend_btn" class="btn btn-primary coachmark__button" target="_blank">
 Find More Discussions 
</a>
</li>
</ul>
</div></li><li id="thread-share-menu" class="nav-tab nav-tab--secondary dropdown share-menu hidden-sm"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="dropdown-toggle" data-toggle="dropdown" title="Share">
<span class="icon-export"></span>
<span class="label">Share</span>
</a>
<ul class="share-menu dropdown-menu">
<li>
<div class="share-menu__label">Share this discussion on</div>
<ul>
<li class="twitter">
<a data-action="share:twitter" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#">Twitter</a>
</li>
<li class="facebook">
<a data-action="share:facebook" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#">Facebook</a>
</li>
</ul>
</li>
</ul>
</li><li data-role="post-sort" class="nav-tab nav-tab--secondary dropdown sorting pull-right"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="dropdown-toggle" data-toggle="dropdown">Sort by Best<span class="caret"></span></a><ul class="dropdown-menu pull-right"><li class="selected"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="sort" data-sort="popular">Best<i aria-hidden="true" class="icon-checkmark"></i></a></li><li class=""><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="sort" data-sort="desc">Newest<i aria-hidden="true" class="icon-checkmark"></i></a></li><li class=""><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="sort" data-sort="asc">Oldest<i aria-hidden="true" class="icon-checkmark"></i></a></li></ul></li></ul></div><div id="posts"><div id="form" class="textarea-wrapper--top-level"><form class="reply"><div class="postbox">
<div role="alert"></div>
<div class="avatar">
<span class="user">
<img data-role="user-avatar" src="./noavatar92.7b2fde640943965cc88df0cdee365907.png" alt="Avatar">
</span>
</div>

<div class="textarea-wrapper" data-role="textarea" dir="auto"><div><span class="placeholder">Join the discussion</span><div class="textarea" tabindex="0" role="textbox" aria-multiline="true" contenteditable="PLAINTEXT-ONLY" data-role="editable" aria-label="Join the discussion" style="overflow: auto; word-wrap: break-word; max-height: 350px;"><p><br></p></div><div style="display: none;"><ul class="user-mention__list">
<li class="header user-mention__header">
<h5>in this conversation</h5>
</li>
</ul>
</div></div>
<div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none">
<div class="drag-text">
 Drag and drop your images here to upload them.
</div>
</div>
<div class="media-preview empty" data-role="media-preview"><ul data-role="media-progress-list"></ul>
<ul data-role="media-rich-list"></ul>
<div class="media-expanded empty" data-role="media-preview-expanded">
<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-role="media-preview-expanded-image" alt="Media preview placeholder">
</div>
</div>
<div class="edit-alert" role="postbox-alert"></div>
<div class="post-actions">
<ul class="wysiwyg">
<li class="wysiwyg__item" data-role="media-uploader"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" tabindex="-1" data-action="attach" class="attach" title="Upload Images"><span>Attach</span></a>
<input type="file" data-role="media-upload" tabindex="-1" accept="image/*">
</li>
</ul>
</div>
</div>

<div data-role="login-form"><div><section class="auth-section logged-out">
<div class="connect">
<h6>Log in with</h6>
<ul data-role="login-menu" class="services login-buttons">

<li class="auth-disqus">
<button type="button" data-action="auth:disqus" title="Disqus" class="connect__button"><i class="icon-disqus"></i></button>
</li>
<li class="auth-facebook">
<button type="button" data-action="auth:facebook" title="Facebook" class="connect__button"><i class="icon-facebook-circle"></i></button>
</li>
<li class="auth-twitter">
<button type="button" data-action="auth:twitter" title="Twitter" class="connect__button"><i class="icon-twitter-circle"></i></button>
</li>
<li class="auth-google">
<button type="button" data-action="auth:google" title="Google" class="connect__button"><i class="icon-google-plus-circle"></i></button>
</li>
</ul>
</div>
<div class="guest">
<h6 class="guest-form-title">
<span class="register-text"> or sign up with Disqus </span>
<span class="guest-text"> or pick a name </span>
</h6>

<div class="help-tooltip__wrapper help-icon">
<div id="rules" class="tooltip show help-tooltip">
<h3 class="help-tooltip__heading">Disqus is a discussion network</h3>
<ul class="help-tooltip__list">
<li><span>Disqus never moderates or censors. The rules on this community are its own.</span></li>
<li><span>Your email is safe with us. It's only used for moderation and optional notifications.</span></li>
<li><span>Don't be a jerk or do anything illegal. Everything is easier that way.</span></li>
</ul>
<p class="clearfix"><a href="https://docs.disqus.com/kb/terms-and-policies/" class="btn btn-small help-tooltip__button" target="_blank">Read full terms and conditions</a></p>
</div>
</div>

<p class="input-wrapper">
<input dir="auto" type="text" placeholder="Name" name="display_name" id="view66_display_name" maxlength="30" class="input--text">
</p>

<div class="guest-details " data-role="guest-details">
<p class="input-wrapper">
<input dir="auto" type="email" placeholder="Email" name="email" id="view66_email" class="input--text">
</p>

<p class="input-wrapper">
<input dir="auto" type="password" class="register-text input--text" placeholder="Password" name="password" id="view66_password">
</p>

<div class="acceptance-wrapper register-text">
By signing up, you agree to the Disqus <a target="_blank" href="https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions">Basic Rules</a>, <a target="_blank" href="https://help.disqus.com/customer/portal/articles/466260-terms-of-service">Terms of Service</a>, and <a target="_blank" href="https://help.disqus.com/customer/portal/articles/466259-privacy-policy">Privacy Policy</a>.
</div>
<div class="acceptance-wrapper guest-text">
By posting, you agree to the Disqus <a target="_blank" href="https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions">Basic Rules</a>, <a target="_blank" href="https://help.disqus.com/customer/portal/articles/466260-terms-of-service">Terms of Service</a>, and <a target="_blank" href="https://help.disqus.com/customer/portal/articles/466259-privacy-policy">Privacy Policy</a>.
</div>

<input type="checkbox" name="author-guest" style="display:none">

<div class="proceed" data-role="submit-btn-container">
<button type="submit" class="proceed__button btn submit" aria-label="Next"><span class="icon-proceed"></span><div class="spinner"></div></button>
</div>
</div>
</div>
</section>

</div></div>
</div>
</form></div><button class="alert alert--realtime" data-role="realtime-notification" style="display: none;"></button><div id="no-posts" style="display: none;"></div><ul id="post-list" class="post-list"><li class="post" id="post-3270657221"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/disqus_pkAREIiLgj/" class="user" data-action="profile" data-username="disqus_pkAREIiLgj">
<img data-role="user-avatar" data-user="249777601" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_pkAREIiLgj/" data-action="profile" data-username="disqus_pkAREIiLgj" data-role="username">Naman Goyal</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3270657221" data-role="relative-time" class="time-ago" title="Sunday, April 23, 2017 5:31 PM">5 hours ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hi Richard, <br>I somehow have a feeling that this is not exactly what is mentioned in the Hierarchical attention network.</p><p>Isn't this more close to the model mentioned in the paper:</p><p>x = TimeDistributed(Dense(300), input_shape=(self.MAX_SEQUENCE_LENGTH, 392))(concated)<br>x = TimeDistributed(Activation('tanh'))(x)<br>x = TimeDistributed(Dense(1))(x)<br>x = Flatten()(x)<br>x = Activation('softmax')(x)<br>x = Reshape((-1,1))(x)<br>final_model = merge([concated, x], mode = lambda x: K.batch_dot(x[0], x[1], axes=[1,1]), output_shape= lambda x: (x[0][0],x[0][2]))</p><p>Let me know what you think.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1i39j9h" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3270657221">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li><li class="post" id="post-3270425627"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/karthikazhagesan/" class="user" data-action="profile" data-username="karthikazhagesan">
<img data-role="user-avatar" data-user="249766159" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24976/6159/avatar92.jpg?1492981317" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/karthikazhagesan/" data-action="profile" data-username="karthikazhagesan" data-role="username">Karthik Azhagesan</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3270425627" data-role="relative-time" class="time-ago" title="Sunday, April 23, 2017 2:01 PM">9 hours ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>how to access call method from l_att? <a href="http://disq.us/url?url=http%3A%2F%2Fl_att.call%3Ay4GbPGdkR6wUkDSJurp-rMfAN0I&amp;cuid=4789097" rel="nofollow noopener">l_att.call</a> etc.</p><p>I am not able to access class objects?</p><p>Could you please explain. I want to access l_att.weights?<br>How to do it? . I would be glad if you can explain me the class objects better. Thanks</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1i34kkb" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3270425627">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li><li class="post" id="post-3222644082"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/qijinyin/" class="user" data-action="profile" data-username="qijinyin">
<img data-role="user-avatar" data-user="246678328" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/qijinyin/" data-action="profile" data-username="qijinyin" data-role="username">Qijin Yin</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3222644082" data-role="relative-time" class="time-ago" title="Saturday, March 25, 2017 1:20 AM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hello!<br>I'm still confused about the Keras' TimeDistributed Wrapper.<br>May you give me some hints?<br>Thanks!</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1haog36" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3222644082">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3225056173"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3222644082" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Qijin Yin</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3225056173" data-role="relative-time" class="time-ago" title="Sunday, March 26, 2017 6:01 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>It is used as applying the same share weight tensor operation across the time dimension.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1hc459p" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3225056173">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li><li class="post" id="post-3190783089"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/yuchuljung/" class="user" data-action="profile" data-username="yuchuljung">
<img data-role="user-avatar" data-user="244673257" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/yuchuljung/" data-action="profile" data-username="yuchuljung" data-role="username">Yuchul Jung</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3190783089" data-role="relative-time" class="time-ago" title="Tuesday, March 7, 2017 6:36 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hello. Thanks for your contributions. When I run your code, I've met the following IndexError. Do you have any idea or solution for that?</p><p>  File "<a href="http://disq.us/url?url=http%3A%2F%2FtextClassifierHATT.py%3AWsShFjuD49DAw8QJ_xYYGDXk-Ss&amp;cuid=4789097" rel="nofollow noopener">textClassifierHATT.py</a>", line 194, in &lt;module&gt;<br>    l_att = AttLayer()(l_dense)<br>  File "C:\Anaconda3\envs\tensorflow_0.12\lib\site-packages\keras\engine\<a href="http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097" rel="nofollow noopener">topology.py</a>", line 572, in __call__<br>    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)<br>  File "C:\Anaconda3\envs\tensorflow_0.12\lib\site-packages\keras\engine\<a href="http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097" rel="nofollow noopener">topology.py</a>", line 635, in add_inbound_node<br>    Node.create_node(self, inbound_layers, node_indices, tensor_indices)<br>  File "C:\Anaconda3\envs\tensorflow_0.12\lib\site-packages\keras\engine\<a href="http://disq.us/url?url=http%3A%2F%2Ftopology.py%3ALoAvH7aYLuWpSw3L32lBLMcGLBw&amp;cuid=4789097" rel="nofollow noopener">topology.py</a>", line 166, in create_node<br>    output_tensors = to_list(<a href="http://disq.us/url?url=http%3A%2F%2Foutbound_layer.call%3AtWXVWoi5WrgOTjpgAaHCu4ulguM&amp;cuid=4789097" rel="nofollow noopener">outbound_layer.call</a>(input_tensors[0], mask=input_masks[0]))<br>  File "<a href="http://disq.us/url?url=http%3A%2F%2FtextClassifierHATT.py%3AWsShFjuD49DAw8QJ_xYYGDXk-Ss&amp;cuid=4789097" rel="nofollow noopener">textClassifierHATT.py</a>", line 179, in call<br>    eij = K.tanh(<a href="http://disq.us/url?url=http%3A%2F%2FK.dot%3AjNeqVnT17hay0_01p_uFz3ZO3Uw&amp;cuid=4789097" rel="nofollow noopener">K.dot</a>(x, self.W))<br>  File "C:\Anaconda3\envs\tensorflow_0.12\lib\site-packages\keras\backend\<a href="http://disq.us/url?url=http%3A%2F%2Ftensorflow_backend.py%3AvZGB_WEWPW0_mryf2MKrOx3W6gs&amp;cuid=4789097" rel="nofollow noopener">tensorflow_backend.py</a>", line 819, in dot<br>    y_permute_dim = [y_permute_dim.pop(-2)] + y_permute_dim<br>IndexError: pop index out of range</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1grpjzl" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3190783089">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3199982033"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/pinkeshbadjatiya/" class="user" data-action="profile" data-username="pinkeshbadjatiya">
<img data-role="user-avatar" data-user="208365322" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/pinkeshbadjatiya/" data-action="profile" data-username="pinkeshbadjatiya" data-role="username">Pinkesh Badjatiya</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3190783089" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Yuchul Jung</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3199982033" data-role="relative-time" class="time-ago" title="Saturday, March 11, 2017 10:37 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I was getting similar error when using some other code. Changing to "theano" backed fixed it for me. You might also want to try this.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gx6pxt" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3199982033">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3201143643"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/yuchuljung/" class="user" data-action="profile" data-username="yuchuljung">
<img data-role="user-avatar" data-user="244673257" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24467/3257/avatar92.jpg?1489366083" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/yuchuljung/" data-action="profile" data-username="yuchuljung" data-role="username">Yuchul Jung</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3199982033" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Pinkesh Badjatiya</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3201143643" data-role="relative-time" class="time-ago" title="Sunday, March 12, 2017 5:48 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Thanks a lot. It works.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gxvm8r" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3201143643">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li></ul>
</li><li class="post" id="post-3173712217"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/disqus_jUviv8aNlX/" class="user" data-action="profile" data-username="disqus_jUviv8aNlX">
<img data-role="user-avatar" data-user="167484071" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/16748/4071/avatar92.jpg?1438271852" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_jUviv8aNlX/" data-action="profile" data-username="disqus_jUviv8aNlX" data-role="username">Miguel</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3173712217" data-role="relative-time" class="time-ago" title="Friday, February 24, 2017 3:59 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hello. Thanks for the post. Not sure but I think there might be a missing detail. The paper proposes a learning context vector u_w. From what I could understand from your Attention class, you just have the learning W. Check this Attention Layer implementation:</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fcbaziotis%2F7ef97ccf71cbc14366835198c09809d2%3AVxoIkWkdE6fkrKyaPUmfKvXQgUA&amp;cuid=4789097" rel="nofollow noopener">https://gist.github.com/cba...</a></p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1ghjo0p" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3173712217">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3174689523"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3173712217" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Miguel</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3174689523" data-role="relative-time" class="time-ago" title="Saturday, February 25, 2017 10:09 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I used TimeDistributed(Dense()) layer for the context learning. You can have it all learned in the attention as well</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gi4m43" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3174689523">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li><li class="post" id="post-3167922208"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/aditsanghvi/" class="user" data-action="profile" data-username="aditsanghvi">
<img data-role="user-avatar" data-user="30780825" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/aditsanghvi/" data-action="profile" data-username="aditsanghvi" data-role="username">adit sanghvi</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3167922208" data-role="relative-time" class="time-ago" title="Tuesday, February 21, 2017 12:20 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I'm new to Keras, and I couldn't quite figure out how to derive attention wegihts using the K function? Have you completed that part too?<br>Thanks!</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1ge3kf4" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3167922208">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3168489385"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3167922208" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> adit sanghvi</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168489385" data-role="relative-time" class="time-ago" title="Tuesday, February 21, 2017 6:51 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I didn't continue the venue since I'm occupied by other things. And I probably need to pick up my thoughts again before I can comfortably answer your question. My initial thought would be - 1. getting the attention layer input using one forward pass after training 2. saving the model weight in attention layer - you need to see Keras document on how to do it. Hope this help.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gefq21" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3168489385">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3221478688"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/aditsanghvi/" class="user" data-action="profile" data-username="aditsanghvi">
<img data-role="user-avatar" data-user="30780825" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/3078/825/avatar92.jpg?1490372724" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/aditsanghvi/" data-action="profile" data-username="aditsanghvi" data-role="username">adit sanghvi</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168489385" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Richard Liao</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3221478688" data-role="relative-time" class="time-ago" title="Friday, March 24, 2017 9:25 AM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Thanks! I'll begin that now and keep you updated when I can visualize.</p><p>Another quick question - in the paper the authors say <br>"The context vector uw can be seen as a high level representation of a fixed query what is the informative word over the words like that used in memory networks (Sukhbaatar et al., 2015; Kumar et al., 2015). The word context vector uw is randomly initialized and jointly learned during the training process"</p><p>Here, the self.weights in our Attention layer is the word context right? So this is tied across all reviews, so how does it find out which ones are important in EACH individual review?</p><p>I may have misunderstood something..</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1h9zgv4" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3221478688">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3225063720"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3221478688" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> adit sanghvi</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3225063720" data-role="relative-time" class="time-ago" title="Sunday, March 26, 2017 6:09 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I haven't been doing this project for a while. But I will go back to it once I have finished other priorities. So do let me know if you or you found others have done the attention visualization part.</p><p>Based on my memory, the context vector is timedistributed dense layer I used in my code. The self.weight in my attention layer is THE attention weight. I bet if you remove the context vector there shouldn't be any major performance changes - I could be wrong. It probably just gives you another layer to learn context weighting schema over word vector dimension. I haven't seen other papers use this concept so I haven't thought it through as well.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1hc4b3c" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3225063720">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li></ul>
</li></ul>
</li><li class="post" id="post-3167136552"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/Sandeep42/" class="user" data-action="profile" data-username="Sandeep42">
<img data-role="user-avatar" data-user="198572409" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/Sandeep42/" data-action="profile" data-username="Sandeep42" data-role="username">Sandeep</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3167136552" data-role="relative-time" class="time-ago" title="Tuesday, February 21, 2017 4:06 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Aren't you missing the bias term in doing the initial linear map to the attention layer?</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gdmq7c" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3167136552">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3168498527"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3167136552" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Sandeep</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168498527" data-role="relative-time" class="time-ago" title="Tuesday, February 21, 2017 6:59 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Good call. I think you are right. Thanks for pointing it out.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gefx3z" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3168498527">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3168642022"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/Sandeep42/" class="user" data-action="profile" data-username="Sandeep42">
<img data-role="user-avatar" data-user="198572409" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/Sandeep42/" data-action="profile" data-username="Sandeep42" data-role="username">Sandeep</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168498527" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Richard Liao</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168642022" data-role="relative-time" class="time-ago" title="Tuesday, February 21, 2017 9:35 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I am trying to implement the same in PyTorch, the bias term is a tough nut to crack, because it needs to be updated in a batch.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1geizty" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3168642022">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3172294388"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3168642022" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Sandeep</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3172294388" data-role="relative-time" class="time-ago" title="Thursday, February 23, 2017 8:13 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>How so? I need to revisit the paper to give better answer but my initial thoughts are bias term should be trained in the same scope of self.W, one for sentence and one for document level. They are all updated at batch level - as in my code I'm using 50 reviews in each batch.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1ggpa0k" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3172294388">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3172338526"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/Sandeep42/" class="user" data-action="profile" data-username="Sandeep42">
<img data-role="user-avatar" data-user="198572409" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/Sandeep42/" data-action="profile" data-username="Sandeep42" data-role="username">Sandeep</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3172294388" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Richard Liao</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3172338526" data-role="relative-time" class="time-ago" title="Thursday, February 23, 2017 9:08 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>You can have a look at the code here <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2FEdGENetworks%2Fattention-networks-for-classification%3AG9wfwA2FO35NSeF1Vz5OoEVNzsI&amp;cuid=4789097" rel="nofollow noopener">https://github.com/EdGENetw...</a>. I added a bias term and made a copy of the same term for the entire batch. Somehow, Pytorch back-propagation failed when I did that. I also think the bias term should be trained along with the batch both at the word level and sentence level.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1ggq82m" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3172338526">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3211314966"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3172338526" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Sandeep</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3211314966" data-role="relative-time" class="time-ago" title="Saturday, March 18, 2017 8:09 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Just start learning pytorch and it seems like pyTorch hasn't implemented the broadcast function like numpy does. You need to use repeat function as a hack for the bias term. See this post: <a href="http://disq.us/url?url=http%3A%2F%2Fwiseodd.github.io%2Ftechblog%2F2017%2F01%2F20%2Fgan-pytorch%2F%3AqypwqPH78gvRFheFl_n8gxTrNQc&amp;cuid=4789097" rel="nofollow noopener">http://wiseodd.github.io/te...</a></p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1h3xmhi" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3211314966">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li><li class="post" id="post-3199984588"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/pinkeshbadjatiya/" class="user" data-action="profile" data-username="pinkeshbadjatiya">
<img data-role="user-avatar" data-user="208365322" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/pinkeshbadjatiya/" data-action="profile" data-username="pinkeshbadjatiya" data-role="username">Pinkesh Badjatiya</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3172338526" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Sandeep</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3199984588" data-role="relative-time" class="time-ago" title="Saturday, March 11, 2017 10:41 PM">a month ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>I found this implementation online by some other author which seemed to work for me. It seems to be considering the bias term as well.<br><a href="https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fcbaziotis%2F6428df359af27d58078ca5ed9792bd6d%3AI49b3VErWq941via0fzM07PAirQ&amp;cuid=4789097" rel="nofollow noopener">https://gist.github.com/cba...</a></p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gx6rws" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3199984588">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li><li class="post" id="post-3165223463"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/hakan_tekba/" class="user" data-action="profile" data-username="hakan_tekba">
<img data-role="user-avatar" data-user="242491320" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/hakan_tekba/" data-action="profile" data-username="hakan_tekba" data-role="username">Hakan Tekba</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3165223463" data-role="relative-time" class="time-ago" title="Monday, February 20, 2017 4:00 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Thanks for detailed post about attention layer.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gchq1z" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3165223463">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li><li class="post" id="post-3161271377"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3161271377" data-role="relative-time" class="time-ago" title="Friday, February 17, 2017 1:43 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Test</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1ga50lt" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3161271377">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li><li class="post" id="post-3158028122"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/hakan_tekba/" class="user" data-action="profile" data-username="hakan_tekba">
<img data-role="user-avatar" data-user="242491320" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/hakan_tekba/" data-action="profile" data-username="hakan_tekba" data-role="username">Hakan Tekba</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3158028122" data-role="relative-time" class="time-ago" title="Thursday, February 16, 2017 5:27 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hi.</p><p>when i run <br>      review_encoder = TimeDistributed(sentEncoder)(review_input)</p><p>it says "Exception: ('Not a Keras tensor:', Reshape{3}.0)".</p><p>Lei can you manage to run code?</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1g87i3e" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3158028122">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3159624435"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3158028122" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Hakan Tekba</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3159624435" data-role="relative-time" class="time-ago" title="Thursday, February 16, 2017 7:11 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>What Keras version you are running. In the last few months, Keras has been through a lot of rewrite, especially the TimeDistributed and TimeDistributedDense layer. You need to follow the latest API document. My recommendation of these things is always to read these pakcages' source code - no matter Keras or Tensorflow or Theano. That's how each researcher has been through.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1g95ptf" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3159624435">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3160029822"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/hakan_tekba/" class="user" data-action="profile" data-username="hakan_tekba">
<img data-role="user-avatar" data-user="242491320" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/hakan_tekba/" data-action="profile" data-username="hakan_tekba" data-role="username">Hakan Tekba</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3159624435" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Richard Liao</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3160029822" data-role="relative-time" class="time-ago" title="Friday, February 17, 2017 3:14 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>keras version is 1.2.0. I copy your code and didn't change. I dont have any idea why it is throwing this error. Is your keras version same with me?</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1g9eem6" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3160029822">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3165225355"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/hakan_tekba/" class="user" data-action="profile" data-username="hakan_tekba">
<img data-role="user-avatar" data-user="242491320" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/24249/1320/avatar92.jpg?1487592145" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/hakan_tekba/" data-action="profile" data-username="hakan_tekba" data-role="username">Hakan Tekba</a></span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3160029822" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Hakan Tekba</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3165225355" data-role="relative-time" class="time-ago" title="Monday, February 20, 2017 4:02 AM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Hi,</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Ffchollet%2Fkeras%2Fissues%2F4796%3ANosARfSsKiAYPW7QCWJDFbnnAzc&amp;cuid=4789097" rel="nofollow noopener">https://github.com/fchollet...</a><br>There is a bug introduced in final version of keras. When i return to previous version, error disappeared.</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1gchrij" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3165225355">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li></ul>
</li></ul>
</li><li class="post" id="post-3157612083"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/disqus_YXuQQ7slMS/" class="user" data-action="profile" data-username="disqus_YXuQQ7slMS">
<img data-role="user-avatar" data-user="81920675" src="./noavatar92.png" data-src="//a.disquscdn.com/1492794604/images/noavatar92.png" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_YXuQQ7slMS/" data-action="profile" data-username="disqus_YXuQQ7slMS" data-role="username">Lei Chen</a></span>

</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3157612083" data-role="relative-time" class="time-ago" title="Wednesday, February 15, 2017 8:32 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>Nice post!</p><p>After reading your attention layer code, I am not very clear about the purposes of using the two Theano dimshuffle functions. Will you please elaborate more. .</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1g7yl2r" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3157612083">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"><li class="post" id="post-3159615602"><div role="alert"></div>
<div data-role="post-content" class="post-content">
<ul class="post-menu dropdown" data-role="menu">
<li class="collapse">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Collapse"><span></span></a>
</li>
<li class="expand">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="collapse" title="Expand"><span>+</span></a>
</li>

<li class="" role="menu">
<a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate">
<i aria-hidden="true" class="icon icon-flag"></i>
</a>
</li>
</ul>

<div class="indicator"></div>

<div class="avatar hovercard">
<a href="https://disqus.com/by/richardliao/" class="user" data-action="profile" data-username="richardliao">
<img data-role="user-avatar" data-user="201007072" src="./noavatar92.png" data-src="https://c.disquscdn.com/uploads/users/20100/7072/avatar92.jpg?1490576972" alt="Avatar">
</a>
</div>
<div class="post-body">
<header class="comment__header">
<span class="post-byline">
<span class="author publisher-anchor-color"><a href="https://disqus.com/by/richardliao/" data-action="profile" data-username="richardliao" data-role="username">Richard Liao</a></span>
<span class="badge moderator">Mod</span>

<span><a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3157612083" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> Lei Chen</a></span>
</span>

<span class="post-meta">
<span class="bullet time-ago-bullet" aria-hidden="true"></span>

<a href="https://richliao.github.io/supervised/classification/2016/12/26/textclassifier-HATN/#comment-3159615602" data-role="relative-time" class="time-ago" title="Thursday, February 16, 2017 7:08 PM">2 months ago</a>
</span>

</header>

<div class="post-body-inner">
<div class="post-message-container" data-role="message-container">
<div class="publisher-anchor-color" data-role="message-content">
<div class="post-message " data-role="message" dir="auto">
<p>dimshuffle is similar to numpy broadcast</p>
</div>

<span class="post-media"><ul data-role="post-media-list"></ul></span>
</div>
</div>
<a class="see-more hidden" title="see more" data-action="see-more">see more</a>
</div>

<footer class="comment__footer"><menu class="comment-footer__menu">
<li class="voting" data-role="voting">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up">

<span class="updatable count" data-role="likes">0</span>
<span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>
</a>
<span role="button" class="vote-down  count-0" data-action="downvote" title="Vote down">

<span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>
</span>
</li>
<li class="bullet" aria-hidden="true"></li>


<li class="reply" data-role="reply-link">
<a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="reply">
<span class="text">Reply</span></a></li>
<li class="bullet" aria-hidden="true"></li>


<li class="comment__share">
<a class="toggle"><span class="text">Share </span></a>
<ul class="comment-share__buttons">
<li class="twitter">
<button class="share__button" data-action="share:twitter">Twitter</button>
</li>
<li class="facebook">
<button class="share__button" data-action="share:facebook">Facebook</button>
</li>
<li class="link">
<input class="share__button" value="http://disq.us/p/1g95j02" name="Link" title="Click to copy post link" data-action="copy-link" readonly="">
</li>
</ul>
</li>

<li class="realtime" data-role="realtime-notification:3159615602">
<span style="display:none;" class="realtime-replies"></span>
<a style="display:none;" href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" class="realtime-button"></a>
</li>

</menu>
</footer>
</div>

<div data-role="blacklist-form"></div>
<div class="reply-form-container" data-role="reply-form"></div>
</div>

<ul data-role="children" class="children"></ul>
</li></ul>
</li></ul><div class="load-more" data-role="more" style="display: none;"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" data-action="more-posts" class="btn load-more__button">Load more comments</a></div></div></section><div id="placement-bottom" data-tracking-area="discovery-south"><div class="post-list" style="height: 0px; visibility: hidden;"></div></div><div id="footer" data-tracking-area="footer" class="disqus-footer__wrapper"><ul class="disqus-footer"><li class="disqus-footer__logo"><a href="https://disqus.com/" rel="nofollow" title="Powered by Disqus" class="disqus-footer__link">Powered by Disqus</a></li><li id="thread-subscribe-button" class="email disqus-footer__item"><div class="default"><a href="https://disqus.com/embed/comments/?base=default&amp;f=richliao-github-io&amp;t_u=https%3A%2F%2Frichliao.github.io%2F&amp;t_d=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;t_t=Text%20Classification%2C%20Part%203%20-%20Hierarchical%20attention%20network&amp;s_o=default#" rel="nofollow" data-action="subscribe" title="Subscribe and get email updates from this discussion" class="disqus-footer__link"><i aria-hidden="true" class="icon icon-mail"></i><span class="clip">Subscribe</span><i aria-hidden="true" class="icon icon-checkmark"></i></a></div><div class="form"><div class="input-wrapper"><input id="thread-subscribe-email" type="email" placeholder="yourname@email.com" class="disqus-footer__input input--text"></div></div></li><li class="install disqus-footer__item"><a href="https://publishers.disqus.com/engage?utm_source=richliao-github-io&amp;utm_medium=Disqus-Footer" rel="nofollow" target="_blank" class="disqus-footer__link"><i aria-hidden="true" class="icon icon-disqus"></i><span class="clip hidden-sm">Add Disqus to your site</span><span class="clip visible-sm hidden-xs">Add Disqus</span><span class="clip visible-xs">Add</span></a></li><li class="privacy disqus-footer__item"><a href="https://help.disqus.com/customer/portal/articles/1657951?utm_source=disqus&amp;utm_medium=embed-footer&amp;utm_content=privacy-btn" rel="nofollow" target="_blank" class="disqus-footer__link"><i aria-hidden="true" class="icon icon-lock"></i><span class="clip">Privacy</span></a></li></ul></div></div><iframe style="position: absolute; width: 1px; height: 1px; left: -9999px; display: none;" aria-hidden="true" id="ssIFrame_google" sandbox="allow-scripts allow-same-origin" src="./iframe.html"></iframe><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./96nq-xsaNcg.html" style="border: none;"></iframe></div></div></div><img src="./tpid=c5mnhdpvrsbn2d" style="display: none;"><img src="./23096" style="display: none;"><img src="./saved_resource" style="display: none;"><iframe src="./sync.html" style="display: none;"></iframe></body></html>