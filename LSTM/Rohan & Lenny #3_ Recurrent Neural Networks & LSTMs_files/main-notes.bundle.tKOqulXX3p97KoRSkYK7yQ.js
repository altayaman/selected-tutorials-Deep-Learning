(function(z){
'use strict';var l$=function(a){z.L.call(this);this.s(a)},PXa=function(a,b){this.user=a;this.quotes=b},QXa=function(a,b){b=b.g();if(b===Number||b.$isProtoEnum)return a=Number(a),Number.isNaN(a)?void 0:a;if(b===Boolean)return!!a;if(b===String)return String(a)},m$=function(a){return a.Ly.best||null},n$=function(a,b){b=b.filter(function(a){return"anon"!=a.hb()});b=z.jb(b,function(a){return a.hb()},a);return z.nb(b).map(function(a){return new PXa(a[0].lc(),a)},a)},RXa=function(a,b,c,d){return(0,z.jd)(a.hs[b.name]||
[],function(a){return a.hd()==c&&a.fe()==d})},o$=function(){this.jD=1},p$=function(a){z.bk.call(this);this.s(a)},SXa=function(a,b){return z.K(a,"slots",b)},TXa=function(a,b){return z.K(a,"requestContext",b)},q$=function(a){z.L.call(this);this.s(a)},r$=function(a){return z.I(a,"inResponseToMediaResource")},s$=function(a){return z.I(a,"mediumQuote")},UXa=function(a,b){a.FL=b;return a},t$=function(a,b){return m$(a)?z.GH(m$(a)).filter(function(a){return this.N_(a)==b},a):[]},VXa=function(a,b,c){c=c.ew;
b=b.getAttribute("name").split(" ");var d=z.xb(b);a=(a.hs[c.name]||[]).filter(function(a){return d[a.ji()]});return a.length?z.Uma(a):null},WXa=function(a,b,c,d){b=RXa(a,b,c,d);return n$(a,b)},XXa=function(a,b){var c=0;(a.hs[b]||[]).forEach(function(a){"anon"==a.hb()&&(c+=a.se())});return c},YXa=function(a){var b=z.YQ(a.pj.Gr,a.pj.Rm(),a.gl.Gr,a.gl.Rm()).Ca().trim();0<a.pj.Rm()&&(b="…"+b);var c=z.uJ(a.rc,a.gl.Gr);a.gl.Rm()<c.Ca().length&&(b+="…");return b},ZXa=function(a){var b=z.GG(a.lra),c=a.pj.Gr,
d=c?b.indexOf(c):-1,e=(c=a.gl.Gr)?b.indexOf(c):-1;if(-1==d||-1==e)return"";for(c=[];d<=e;d++)c.push(z.uJ(a.rc,b[d]));b=z.Ra(c);a=z.oz(c.indexOf(c[0]),a.pj.Rm(),c.indexOf(b),a.gl.Rm(),!1);return z.Dy(new z.xy(z.Tr,z.isa),c,a,!0)},$Xa=function(a){if(a.pj.Gr==a.gl.Gr)return{fP:a.pj.Gr.getAttribute("name"),mF:"share",startIndex:a.pj.Rm(),endIndex:a.gl.Rm()}},aYa=function(a,b,c){var d=a.ha.ia(z.Ota,{postId:b},{filter:c});return z.hJ(a,d,function(){return this.vb.Um(d)})},bYa=function(a,b){z.Yx(a,7);var c=
new z.Px("",1,a.Ca());b.forEach(function(a){z.Wx(c,z.zx(a.startOffset,a.endOffset,[a.quoteId],[a.userId]))},a);b=z.by(c);for(var d=z.cy(c,b),e=0;e<b.length;e++){var g=d[e];if(g.length){for(var h={},l=[],q=0;q<g.length;q++){var r=g[q];h[z.I(r,"creatorIds")]=!0;l.push(r.getName())}g=b[e];q=e<b.length-1?b[e+1]:a.Ca().length;z.Wx(a,z.zx(g,q,l,Object.keys(h)))}}},cYa=function(a,b,c){b="";a.Lya?a=z.n("Top highlight"):(c=""+z.A(z.MS(z.C({Q0:!0,lfa:!c.useragent.isMobile},a),c)),1==a.Rh&&a.isActive&&(a=z.n("highlighted"),
c+=" "+a),a=(0,z.y)(c));b+=a;return(0,z.y)(b)},u$=function(a,b){this.wh=a;this.jla=b;this.oe=(this.Wj=b=z.BG(a.node,b))&&b.getAttribute("name");this.pL=b?z.LC(a,b):-1},dYa=function(a,b,c){return(0,z.y)(z.rS(z.C({user:c.currentUser,type:"quoteResponses"},a),c))},eYa=function(a,b,c){b='\x3cdiv\x3e\x3cdiv class\x3d"buttonSet u-inlineBlock"\x3e'+z.A(z.zn({action:"quote",source:"quote_popover",icon:(0,z.O)(""+z.A(z.Sm())),l:(0,z.O)("button--highlightMenu u-sm-height42 u-sm-lineHeight44 u-accentColor--highlightStrong js-quoteAttributions-pileOn"),
dc:!0,Xi:!0,uaa:"quote",sa:!0,isActive:a.isActive},c))+(c.supportsEdit?z.A(z.zn({action:"quote-respond",source:"quote_popover",icon:(0,z.O)(""+z.A(z.bn())),l:"button--highlightMenu u-sm-height42 u-sm-lineHeight44",dc:!0,sa:!0},c)):"")+(a.SQ?z.A(z.zn({action:"twitter",source:"quote_popover",icon:(0,z.O)(""+z.A(z.fn())),l:"button--highlightMenu u-sm-height42 u-sm-lineHeight44",dc:!0,sa:!0},c)):"")+'\x3cdiv class\x3d"buttonSet-separator"\x3e\x3c/div\x3e\x3c/div\x3e';b+='\x3cdiv class\x3d"'+z.F(z.E("js-quoteAttributions-info u-inlineBlock u-verticalAlignTop u-noWrapWithEllipsis u-maxWidth414 u-paddingTop14 u-paddingRight18 u-paddingBottom0 u-paddingLeft10 u-xs-paddingTop13 u-xs-paddingLeft4 u-xs-maxWidth160"))+
'"\x3e'+cYa(a,0,c)+"\x3c/div\x3e\x3c/div\x3e";return(0,z.y)(b)},v$=function(a){z.Xr.call(this);var b=z.ft();this.pj=b&&new u$(z.Ot(b,!0),a);this.gl=b&&new u$(z.Ot(b,!1),a)},w$=function(a){z.L.call(this);this.s(a)},fYa=function(a,b){var c=new z.Uk(z.Sr(b)),c=new z.Ld(c.ia(z.Lsa)),d=new z.Ld("https://www.facebook.com/v2.3/dialog/share");z.Sd(d,z.se({app_id:b.facebook.key,href:a.toString(),display:"popup",redirect_uri:c.toString()}));return d},gYa=function(){var a=z.n("Highlights");return(0,z.y)(""+
a)},hYa=function(a){return(0,z.y)(z.A(z.Ao(String(a.content)))+" — "+z.A(z.GK(a))+" "+z.A(a.url))},iYa=function(a,b,c){return(0,z.Qk)("https://"+z.yi(c.textshotHost)+"/image")},jYa=function(a,b,c){return(0,z.Qk)("https://twitter.com/"+z.yi(c.currentUser.twitterScreenName)+"/status/"+z.yi(a.id))},kYa=function(){var a=z.y,b;b=z.n("Failed to load image");b=(0,z.y)(""+b);return a('\x3cspan class\x3d"tweetEditor-imageStatusIcon"\x3e\x26times;\x3c/span\x3e'+z.A(b))},lYa=function(a,b,c){b=z.y;a='\x3cdiv class\x3d"tweetEditor u-sizeFullWidth"\x3e\x3cdiv class\x3d"js-tweetEditor-error tweetEditor-error u-paddingBottom10 u-textAlignCenter u-textColorRed"\x3e\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-avatar"\x3e'+
z.A(z.rp({user:a.user,Xe:!0},c))+'\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-tweetContainer"\x3e\x3cdiv class\x3d"tweetEditor-textContainer"\x3e\x3cdiv class\x3d"js-tweetEditor-text textInput textInput--chromeless u-textAlignLeft"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tweetEditor-textshot"\x3e\x3cdiv class\x3d"js-tweetEditor-imageStatus tweetEditor-imageStatus"\x3e';var d;d=z.n("Loading image attachment…");d=(0,z.y)(""+d);a=a+z.A(d)+"\x3c/div\x3e";d={};d=(0,z.y)(z.lm(z.C({name:"addCircled",
size:"21px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"21" height\x3d"21" viewBox\x3d"0 0 21 21" \x3e\x3cpath d\x3d"M2.286 12.691a8.358 8.358 0 0 0 2.192 3.831A8.298 8.298 0 0 0 8.3 18.715c.73.19 1.462.288 2.192.29a8.363 8.363 0 0 0 2.2-.29 8.286 8.286 0 0 0 3.822-2.193 8.264 8.264 0 0 0 2.201-3.82c.19-.732.285-1.462.285-2.193a8.248 8.248 0 0 0-.285-2.2 8.265 8.265 0 0 0-2.2-3.823 8.258 8.258 0 0 0-3.822-2.2A8.66 8.66 0 0 0 10.5 2a8.188 8.188 0 0 0-2.192.286 8.33 8.33 0 0 0-3.831 2.2 8.298 8.298 0 0 0-2.193 3.822A8.66 8.66 0 0 0 2 10.5c0 .731.095 1.461.286 2.191zm1.557-.413a6.74 6.74 0 0 1-.239-1.773c0-.592.08-1.184.24-1.773a6.77 6.77 0 0 1 1.786-3.09 6.73 6.73 0 0 1 3.085-1.79c.59-.16 1.181-.24 1.777-.24.596 0 1.188.08 1.777.24a6.736 6.736 0 0 1 3.094 1.786 6.801 6.801 0 0 1 1.787 3.094c.16.59.239 1.178.239 1.768 0 .59-.08 1.182-.24 1.778a6.75 6.75 0 0 1-1.786 3.093 6.801 6.801 0 0 1-3.094 1.787 6.707 6.707 0 0 1-3.545 0A6.74 6.74 0 0 1 5.63 15.37a6.746 6.746 0 0 1-1.787-3.093zm2.937-2.055c0-.134.049-.25.148-.345a.494.494 0 0 1 .359-.143H9.23a.478.478 0 0 0 .35-.148.475.475 0 0 0 .147-.35V7.303c0-.141.048-.262.144-.363a.458.458 0 0 1 .345-.152h.562c.134 0 .25.05.35.152a.502.502 0 0 1 .147.363v1.934c0 .135.048.252.143.35a.46.46 0 0 0 .345.148h1.945c.14 0 .26.048.358.143.099.096.148.21.148.345v.562a.476.476 0 0 1-.148.35.486.486 0 0 1-.358.147h-1.945a.472.472 0 0 0-.345.143.47.47 0 0 0-.143.345v1.944c0 .14-.05.262-.148.36a.478.478 0 0 1-.35.147h-.56a.498.498 0 0 1-.489-.507V11.77a.461.461 0 0 0-.148-.345.487.487 0 0 0-.35-.143H7.287a.488.488 0 0 1-.36-.147.476.476 0 0 1-.147-.35v-.562z" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
d)));d=(0,z.O)(""+z.A(d));var e;e=z.n("Include quote image");e=(0,z.y)(""+e);a=a+z.A(z.zn({icon:d,isPrimary:!0,sa:!0,l:"js-tweetEditor-addTextshot u-hide",action:"add-textshot",text:(0,z.O)(""+z.A(e))},c))+'\x3cdiv class\x3d"js-tweetEditor-imageContainer tweetEditor-imageContainer"\x3e';d=(0,z.O)("\x26times;");e=z.n("Remove quote image from tweet");e=(0,z.y)(""+e);return b(a+z.A(z.vn({o:d,$e:!0,l:"js-tweetEditor-removeTextshot tweetEditor-removeTextshot",title:(0,z.O)(""+z.A(e)),action:"remove-textshot"},
c))+'\x3cimg class\x3d"js-tweetEditor-image tweetEditor-image" data-action\x3d"toggle-expand-image"\x3e\x3c/img\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'+(c.variants.textshots_userid?'\x3cdiv class\x3d"u-textColorRed"\x3eTweet to test account @fuzzyoctopusfee\x3c/div\x3e':""))},mYa=function(){var a=z.n("An error occurred, and the tweet wasn’t posted to Twitter.");return(0,z.y)(""+a)},nYa=function(a,b,c){var d="";b=z.n("Tweet posted.");a=a.zCa;var e;e=z.n("View the tweet");e=(0,z.y)(""+
e);d+=b+" "+z.A(z.P({xb:!0,href:a,o:(0,z.O)(""+e)},c));return(0,z.y)(d)},oYa=function(){var a=z.n("Tweet must be 140 characters or less.");return(0,z.y)(""+a)},x$=function(a,b,c){z.T.call(this);this.$d=a.get("quotes-data");var d=this.$d.Sn;d.subscribe("add",this.F9,this);d.subscribe("remove",this.F9,this);this.$a=b;this.zd=b.un;this.sm=c;this.f6=[];this.Ga=a.get("app");this.za=a.get("popover");this.ha=a.get("route-builder");this.QU=a.get("global-event-bus");this.xra=a.get("progressive-media-loader")},
qYa=function(a,b,c,d){var e=pYa(a,b);if(e){var g=a.$a.isPublished(),h=z.ina(a.$a);e.SQ=g&&h;if(c=z.DJ(z.zI(z.yI(z.AI(z.EJ(z.BI(a.za).Ya(eYa,e),"top"),c),{EP:!0,jt:!0,Ba:!0}),"popover--quoteAttributions"),d).na())c.Yl("deactivate",function(){this.bo===b&&y$(this,null)},a),c.Tm().w("quote",a.gma.bind(a,c)).w("quote-respond",a.hma.bind(a,c)).w("twitter",a.ima.bind(a))}},pYa=function(a,b){if("anon"==b.hb())return{isActive:!1,Lya:!0};var c=z$(a,b),d=b.hd();b=b.fe();a=WXa(a.$d,c,d,b);if(!a||!a.length)return null;
a=(0,z.zb)(a,function(a){return a.user});c=(0,z.jd)(a,function(a){return a.userId!=z.Dv().userId});return{isActive:(0,z.Uc)(a,function(a){return a.userId==z.Dv().userId}),social:c,Rh:a.length}},rYa=function(a,b){a=a.zd.querySelectorAll('.markup--quote[name~\x3d"'+b.ji()+'"]');return z.ab(a)},z$=function(a,b){b=b.Wb()[0].name;return(b=z.jx(a.zd,b))?a.$a.ii(b):null},sYa=function(a,b){var c=z.it(b);return(c=z.nK(a.sm,c))?VXa(a.$d,b,c):null},y$=function(a,b){a.bo!==b&&(a.bo&&tYa(a,a.bo,!1),b&&tYa(a,b,
!0),a.bo=b)},tYa=function(a,b,c){rYa(a,b).map(function(a){z.md(a,"is-targeted",c)})},A$=function(a,b){(b=uYa(a,b))&&z.lK(a.Ej(),b)},uYa=function(a,b){var c=b.Wb(),d=z.jx(a.zd,c[0].getName());a=z.jx(a.zd,z.Ra(c).getName());return z.YQ(d,b.hd(),a,b.fe())},B$=function(a,b,c,d){a={postId:a.$a.Ia(),quoteId:b,source:d};z.RD(c?z.ana:z.nva,a)},vYa=function(a,b){z.FG(a,z.EG,z.Xb(b,z.Qb(!0)),void 0)},wYa=function(a,b,c){z.sa(a)||(a=a.toString());var d=window,e={scrollbars:!0,sBa:!0,toolbar:!1,location:!0,width:670,
height:690};z.vb(e,c||{});e.left||e.top||(e.width=(0,window.parseInt)(e.width,10),e.height=(0,window.parseInt)(e.height,10),e.left=Math.max(d.screenX+Math.round(d.outerWidth/2-e.width/2),0),e.top=Math.max(d.screenY+Math.round(d.outerHeight/2-e.height/2),0));var g={scrollbars:"scrollbars",sBa:"resizable",toolbar:"toolbar",location:"location",width:"width",height:"height",left:"left",top:"top"};c=z.gs(e,function(a,b,c){g[c]&&("boolean"==typeof b&&(b=b?"yes":"no"),a.push(g[c]+"\x3d"+b));return a},[]).join();
return d.open(a,b,c)},xYa=function(a){var b=z.kC(z.moa,{Eza:!0});b&&(b=b.split(/\s+/),b=b.filter(function(a){return!z.Fa(a)}),b.length&&z.id(a,b))},yYa=function(a){if(!a)return"";var b=[],c=z.tb(["grafId","noteId","command","startIndex","endIndex"]),d;for(d in a)b[c[d]]=a[d];return b.join("-")},C$=function(a){z.jD.call(this);this.rc=a.get("dom-model-converter");this.B8={};this.t7={};this.SW={};this.pa=a;this.wm=a.get("request");this.ha=a.get("route-builder");this.ua=a.get("model-store");this.Za="";
this.c9=z.wr;this.c6=!1;this.Tg=null},D$=function(a,b){var c=a.B8[b];c||(c=a.B8[b]=new z.CH,a.va("new_note_list",c,a));return c},zYa=function(a,b){if(!b)return!1;var c=b.Ca();if(a.content==c.substring(a.startIndex,a.endIndex))return!0;var d=new RegExp(z.Ia(a.content),"gi"),c=(b=d.exec(c))&&d.exec(c);return b&&!c?(c=a.endIndex-a.startIndex,a.startIndex=b.index,a.endIndex=b.index+c,a.content=b[0],!0):!1},E$=function(a,b,c){var d=b.Ia(),e=b.Xf(),g=D$(a,b.Ud()),h=g?g.indexOf(b):-1,l=b.$F();b.Uw(c);"HIDDEN"==
c?a.ua.remove(b):b=z.yH(a.ua,b);var q=g?g.indexOf(b):-1;return{zk:a.wm.put(a.ha.ia(z.Usa,{postId:d,noteId:e}),{state:c}),iH:function(){b.Uw(l);-1==q&&(-1==h?g.add(b):z.EH(g,b,h))}}},F$=function(a,b,c,d,e,g){var h=z.I(a.yo(c,e),"replies"),l=z.Sa(h,function(a){return a.Yv()==b}),q=h[l];"HIDDEN"==g&&z.Xa(h,l);c=a.ha.ia(z.Xsa,{postId:d,noteId:c,replyId:b});a=a.wm.put(c,{state:g});var r=z.Sa(h,function(a){return a.Yv()==b});return{zk:a,iH:function(){-1==r&&z.db(h,l,0,q)}}},AYa=function(a,b,c){this.range=
a;this.anchor=b;this.iz=b.getAttribute("name");this.highlight=c},G$=function(a,b,c){z.T.call(this);this.iM=b;this.ira=c;this.La=a.get("screen");this.Ra=a.get("screen-request")},BYa=function(a,b){b=b.querySelectorAll(".js-trackedPostPromotion");null!=a.iM.postPageContext&&null!=a.iM.postPageContext.postId&&z.ab(b).forEach(function(b){var d=a.iM.postPageContext.postId,e=b.getAttribute("data-post-id"),g=b.getAttribute("data-post-promotion-source");b=b.getAttribute("data-location-id");z.RD(z.Pva,{hostPostId:d,
targetPostId:e,promotionSource:g,locationId:b})})},CYa=function(){},DYa=function(a){this.oL=a},H$=function(a,b){return b?z.jx(a.oL,b):null},EYa=function(a,b,c){vYa(a.oL,function(a){var e=a.getAttribute("name");e&&b.call(c,a,e)})},FYa=function(a,b){return z.th(a.oL,b)?a.oL:null},I$=function(a,b,c,d,e){z.$Z.call(this,a,b);this.Va(new z.sY(c));this.Va(new z.I_(!1));this.Va(new z.K_(a));this.Va(new z.a_);this.Va(new z.s0(!1,!1));this.Va(new z.M0(d,!0));this.nk=!0;this.ll=d;this.wm=a.get("request");this.xa=
a.get("dialog");this.rW=e;this.na()},GYa=function(){var a=z.n("Saving failed. You may be having connectivity issues or notes might be disabled on this post. Please try again.");return(0,z.y)(""+a)},HYa=function(){var a=z.n("Yikes! Something happened and we couldn’t dismiss this note.");return(0,z.y)(""+a)},IYa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this note.");return(0,z.y)(""+a)},JYa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this reply.");
return(0,z.y)(""+a)},KYa=function(){var a=z.n("The note has been dismissed.");return(0,z.y)(""+a)},LYa=function(){var a=z.n("The note has been deleted.");return(0,z.y)(""+a)},MYa=function(){var a=z.n("The reply has been deleted.");return(0,z.y)(""+a)},NYa=function(){var a=z.n("Write a note…");return(0,z.y)(""+a)},OYa=function(){var a=z.n("Cancel");return(0,z.y)(""+a)},J$=function(a,b,c,d,e){I$.call(this,a,b,e||"Leave a note",400,d||null);this.Za=c;this.ha=a.get("route-builder");this.Ve=a.get("notes-data")},
K$=function(a,b,c,d,e,g){I$.call(this,a,b,"Leave a reply…",200,d);this.ha=a.get("route-builder");this.Ve=a.get("notes-data");this.Za=c;this.B9=g||null;this.oe=e},QYa=function(a,b,c){var d='\x3cdiv class\x3d"quoteResponses js-quoteResponses"\x3e',e=a.quotes.length,g=a.responses.length||a.A3;b=a.notes.length||a.QQ;if(e||g||b){if(e){var e='\x3cdiv class\x3d"quoteResponses-section"\x3e'+z.A(z.Ap({title:(0,z.O)(z.A(gYa())+" ("+z.A(a.quotes.length)+")"),af:!0},c)),h;h={wea:a.quotes,aDa:!0};var l='\x3cdiv class\x3d"js-quotesList"\x3e';
if(!h.aDa)var q=z.n("Learn more"),l=l+z.A(z.Ap({title:(0,z.O)(""+z.A(gYa())),af:!0,Df:(0,z.O)(""+z.A(z.yp({href:(0,z.M)(""+z.G((0,z.Qk)("https://medium.com/the-story/introducing-highlights-a4df69e8ed43"))),moreText:(0,z.O)(""+q),qb:!0},c)))},c));for(var q="list u-marginTop5 u-marginBottom15"+(h.wea.length?"":" u-hide"),q=(0,z.O)(q),l=l+('\x3cul class\x3d"'+z.F(q)+'"\x3e'),q=h.wea,r=q.length,u=0;u<r;u++){for(var w=q[u],D="",J=w.quotes,Q=J.length,N=0;N<Q;N++)D+=""+J[N].quoteId+(N!=Q-1?",":"");D=z.E(D);
l+='\x3cli class\x3d"list-item list-item--inline u-border0" data-quote-ids\x3d"'+z.F(D)+'" data-quote-creator-id\x3d"'+z.F(w.user.userId)+'" data-action\x3d"highlight-quote" data-action-type\x3d"hover"\x3e'+z.A(z.pp(z.C({user:w.user,cf:!0},h),c))+"\x3c/li\x3e"}h=(0,z.y)(l+"\x3c/ul\x3e\x3c/div\x3e");e=e+z.A(h)+"\x3c/div\x3e"}else e="";g?(g='\x3cdiv class\x3d"quoteResponses-section'+(a.A3?" is-withEditor":"")+'"\x3e'+z.A(z.Ap({title:(0,z.O)(""+z.A(z.Do())),af:!0},c)),a.A3&&c.supportsEdit&&c.isAuthenticated?
(h={},h=(0,z.y)('\x3cdiv class\x3d"js-inlineNewPostControl inlineNewPostControl inlineNewPostControl--quoteResponses"\x3e'+z.rS(z.C({user:c.currentUser,isCollapsed:!0,bA:!0,type:"quoteResponses",Et:(0,z.O)(""+z.A(z.Lo()))},h),c)+"\x3c/div\x3e"),h=z.A(h)):h="",g=g+h+PYa(a,0,c)+"\x3c/div\x3e"):g="";d+=e+g;if(a.JAa&&b){g=z.n("Who can see this?");d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed u-paddingLeft0 u-paddingRight0"\x3e';e=b="";h=a.post.homeCollection;h=a.post.creator.userId!=
c.currentUser.userId?h?z.n("Private notes are visible to you, the author, and the editors of {$name}.",{name:z.A(h.name)}):z.n("Private notes are visible to you, the author, and the editors of any publication this story is added to."):h?z.n("Private notes are visible to you and the editors of {$name}.",{name:z.A(h.name)}):z.n("Private notes are visible to you and the editors of any publication this story is added to.");e+=h;e=(0,z.y)(e);e=""+z.A(e);e=(0,z.O)(e);b+='\x3cspan data-tooltip\x3d"'+z.F(e)+
'"\x3e'+g+"\x3c/span\x3e";g={};g=(0,z.y)(z.lm(z.C({name:"lock",size:"19px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" viewBox\x3d"0 0 19 19" \x3e\x3cpath d\x3d"M14 14.052a1 1 0 0 1-.992.998H5.992A.99.99 0 0 1 5 14.052v-4.004a1 1 0 0 1 .992-.998h7.016a.99.99 0 0 1 .992.998v4.004zM7 5.445C7 4.187 8.114 3.15 9.5 3.15c1.385 0 2.5 1.04 2.5 2.295V8.05H7V5.445zm6.008 2.605H13V5.445c0-1.822-1.578-3.295-3.5-3.295C7.577 2.15 6 3.618 6 5.445V8.05h-.008A2 2 0 0 0 4 10.048v4.004a1.99 1.99 0 0 0 1.992 1.998h7.016A2 2 0 0 0 15 14.052v-4.004a1.99 1.99 0 0 0-1.992-1.998z" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
g)));g=(0,z.O)(""+z.A(g));e=z.n("Private notes");e=(0,z.y)(""+e);b={uCa:g,title:(0,z.O)(""+z.A(e)),af:!0,Df:(0,z.O)(b),l:"heading--privateNotes"};b=(0,z.y)(z.wp(z.C({ah:(0,z.O)(""+z.xp(b,c)),yza:!0},b)));b=d+=z.A(b);d=""+('\x3cdiv class\x3d"privateNotes-list js-notesList'+(a.QQ?" is-showingNoteEditor":"")+(0==a.notes.length?" is-empty":"")+'"\x3e');g=a.notes;e=g.length;for(h=0;h<e;h++)d+=L$({note:g[h],post:a.post,AH:a.AH},0,c);a.QQ?(g=a.post.creator,a="",g=c.currentUser.userId==g.userId?z.n("Leave yourself a note"):
z.n("Send {$name} a private note…",{name:z.A(g.name)}),a+=g,a=(0,z.y)(a),a='\x3cdiv class\x3d"privateNotes-actions js-noteActions"\x3e'+z.A(z.wn({action:"show-note-editor",text:(0,z.O)(""+z.A(a)),l:"privateNotes-prompt"},0,c)),g=z.y,e='\x3cdiv class\x3d"privateNotes-editor"\x3e'+z.A(z.qp({user:c.currentUser,Xe:!0},c))+'\x3cdiv class\x3d"js-noteEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',h=z.n("Send"),h=(0,z.y)(""+h),c=g(e+z.A(z.wn({action:"save-note",isPrimary:!0,l:"js-saveNoteButton",
text:(0,z.O)(""+z.A(h))},0,c))+z.A(z.wn({action:"hide-note-editor",text:(0,z.O)(""+z.A(OYa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e"),c=a+c+"\x3c/div\x3e"):c="";c=(0,z.y)(d+("\x3c/div\x3e"+c));d=b+('\x3cdiv class\x3d"quoteResponses-inner privateNotes"\x3e'+c+"\x3c/div\x3e\x3c/div\x3e")}}else 0<a.dB&&(a=z.n("Show next tip"),b=z.n("Show previous tip"),d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed quoteResponses-section--tips u-textAlignCenter u-paddingLeft0 u-paddingRight0"\x3e\x3cdiv class\x3d"quoteResponses-section--tipsInner u-alignMiddle"\x3e'+
z.A(z.zn({Fb:!0,$e:!0,sa:!0,action:"previous-highlight-tip",icon:(0,z.O)(""+z.A(z.qm())),title:(0,z.O)(""+b)},c))+"\x3cdiv class\x3d'u-alignBlock quoteResponses-section--tipsContent u-paddingLeft20 u-paddingRight20 js-highlightTip'\x3e\x3c/div\x3e"+z.A(z.zn({Fb:!0,$e:!0,sa:!0,action:"next-highlight-tip",icon:(0,z.O)(""+z.A(z.sm())),title:(0,z.O)(""+a)},c))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");return(0,z.y)(d+"\x3c/div\x3e")},PYa=function(a,b,c){return(0,z.y)(z.A(z.XS({posts:a.responses,source:"quoteResponses",
kP:!0},0,c)))},L$=function(a,b,c){var d,e=null==a.note.replies?null:a.note.replies.length,g=null==a.note.replyId,h=a.post.creator.userId==c.currentUser.userId,l=a.post.creator.userId==a.note.author.userId;d=a.note.author.userId==c.currentUser.userId;b=h||(null==a.post.homeCollection?null:a.post.homeCollection.virtuals.permissions.canEditPosts);var q=""+(g?"js-note-item"+(a.note.noteId?" js-note-"+a.note.noteId:""):"js-reply-item"+(a.note.replyId?" js-reply-"+a.note.replyId:"")),q=z.E(q),q='\x3cdiv class\x3d"privateNotes-item '+
z.F(q)+' js-note" data-note-id\x3d"'+z.F(a.note.noteId)+'"\x3e'+(g?z.A(z.pp({user:a.note.author},c)):z.A(z.np({user:a.note.author},c)))+'\x3cdiv class\x3d"privateNotes-authorLockup"\x3e\x3cdiv class\x3d"privateNotes-author"\x3e'+z.A(z.so({user:a.note.author},c));g||!(h||d||(null==a.post.homeCollection?0:a.post.homeCollection.virtuals.permissions.canEditPosts))||l||a.Zca?h="":(h=z.n("(Editor)"),h=(0,z.y)(""+h),h='\x3cspan class\x3d"privateNotes-author--supplemental"\x3e '+z.A(h)+"\x3c/span\x3e");q=
q+h+'\x3c/div\x3e\x3cdiv class\x3d"privateNotes-supplemental"\x3e'+z.A(z.hj(Number(a.note.createdAt),c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"privateNotes-content js-privateNotesContent"\x3e';h=z.A(z.Xz(String(a.note.content),c));l=String(h).replace(/(\r\n|\r|\n)/g,"\x3cbr\x3e");h=z.Eh(h,z.Hh)?(0,z.y)(l,z.Fh(h)):l;d=""+(q+h+"\x3c/div\x3e"+(d?RYa({note:a.note,isPrimary:g},c):""));if(g){d+='\x3cdiv class\x3d"privateNotes-replies'+(e?"":" is-empty")+' js-repliesList"\x3e';if(e)for(e=a.note.replies,
g=e.length,q=0;q<g;q++)h=e[q],d+=L$({note:h,post:a.post,Zca:a.note.author.userId==h.author.userId},0,c);e=d;a.AH?(g=z.y,d='\x3cdiv class\x3d"privateNotes-editor privateNotes-editor--reply"\x3e'+z.A(z.op({user:c.currentUser,Xe:!0},c))+'\x3cdiv class\x3d"js-replyEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',q=z.n("Send"),q=(0,z.y)(""+q),g=g(d+z.A(z.wn({action:"save-reply",isPrimary:!0,text:(0,z.O)(""+z.A(q))},0,c))+z.A(z.wn({action:"hide-reply-editor",text:(0,z.O)(""+z.A(OYa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e")):
g="";g="\x3c/div\x3e"+g+'\x3cdiv class\x3d"privateNotes-actions'+(b?" privateNotes-actions--withDismiss":"")+' u-clearfix"\x3e';a.AH?(d=z.y,q=z.n("Reply"),q=(0,z.y)(""+q),d='\x3cdiv class\x3d"u-floatLeft"\x3e'+d(z.A(z.wn({isPrimary:!0,action:"show-reply-editor",l:"privateNotes-prompt",text:(0,z.O)(""+z.A(q))},0,c)))+"\x3c/div\x3e"):d="";d=e+(g+d+(b?'\x3cdiv class\x3d"u-floatRight"\x3e'+RYa({note:a.note,isPrimary:!0,Ica:!0},c)+"\x3c/div\x3e":"")+"\x3c/div\x3e")}return(0,z.y)(d+"\x3c/div\x3e")},RYa=
function(a,b){var c=z.y,d=a.isPrimary?a.note.noteId:a.note.replyId,e=a.Ica?"dismiss-note":a.isPrimary?"delete-note":"delete-reply";a=a.Ica?z.n("Dismiss note"):z.n("Delete");a=(0,z.y)(""+a);a=z.A(a);return c(z.A(z.wn({actionValue:d,action:e,l:"privateNotes-delete js-deleteNote",text:(0,z.O)(""+a)},0,b)))},SYa=function(a,b,c){b="";if(0==a.n3)a=1==a.dB?z.n("People highlighted this passage. You can click on an existing highlight to add to it, like below:"):z.n("{$topQuoteCount} people highlighted this passage. You can click on an existing highlight to add to it, like below:",
{topQuoteCount:z.A(a.dB)}),b+=a,b+='\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.F(z.Ci(z.bm({imageId:"1*SyXCciYXeNpx4-GUAuh0XQ.gif"},0,c)))+'"\x3e';else if(1==a.n3)a=z.n("Or, select any passage to create your own highlight and tell the author and others what resonated with you:"),b+=a+'\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.F(z.Ci(z.bm({imageId:"1*dEp02HXMKtAeKxsV5MWqGg.gif"},0,c)))+'"\x3e';else if(2==a.n3){a=z.n("so that you can save your highlights and share them with others.");
var d=z.n("Sign in to create a profile");b+=z.A(z.P({xb:!0,dc:!0,source:"highlight_tip",o:(0,z.O)(""+d),href:(0,z.M)(""+z.G(z.bl(c)))},c))+" "+a}return(0,z.y)(b)},M$=function(a,b,c,d,e,g,h,l){z.T.call(this);this.pa=a;this.ra=a.get("butter-bar");this.$a=b;this.oe=c;this.ij=e;this.$d=a.get("quotes-data");this.Ve=a.get("notes-data");this.Fi=a.get("responses-data");this.Me=g;this.rW=d;this.sX=(this.XD=h)?h.ji():null;this.sf=this.uc=null;this.lj={};this.E7=!!z.Fv();this.G7=!!z.Hv();this.ky=this.E7&&this.G7&&
z.vK(b);this.yp=null;this.qK=0;this.H$=XXa(this.$d,this.oe);this.Hu=l;this.Wa(this.nu());this.F8=z.Fv()?2:3},TYa=function(a){a.lb(".js-block").forEach(function(a){this.Ka(a,"mouseenter",this.Fma,this);this.Ka(a,"mouseleave",this.QY,this)},a)},UYa=function(a){a.lb(".js-note").forEach(function(a){this.Ka(a,"mouseenter",this.Dma,this);this.Ka(a,"mouseleave",this.QY,this)},a)},VYa=function(a,b){var c=a.query(".js-note-"+b);a.lj[b]||(a.lj[b]=new K$(a.pa,c.querySelector(".js-replyEditor"),a.$a.Ia(),b,a.oe),
z.lD(a,a.lj[b],"saving",a.Wpa,a),z.lD(a,a.lj[b],"save",a.Qpa,a),z.lD(a,a.lj[b],"fail",a.Poa,a));z.hd(c,"is-noteEditorVisible");a.lj[b].focus()},WYa=function(a,b){var c=a.lj[b];c&&(c.Ua()&&c.Mc(""),a=a.query(".js-note-"+b),z.kd(a,"is-noteEditorVisible"))},XYa=function(a,b,c){var d=H$(a.Me,a.oe);if(d){var e=[];a.Hu&&(e=a.Hu.quotes.map(function(a){return a.ji()}));(0,z.zb)(d.querySelectorAll(".markup--quote"),function(a){var d=a.getAttribute("data-creator-ids").split(" "),d=z.Wa(d,b);if(this.Hu)var l=
a.getAttribute("name").split(" "),d=d&&(0,z.Uc)(l,z.Wa.bind(null,e));z.md(a,"is-selected",c&&d)},a)}},N$=function(a){return(a=z.fx(a,function(a){return z.gd(a,"js-note-item")}))&&a.getAttribute("data-note-id")},YYa=function(a,b,c,d){b=new z.xJ(b,300);b.Wa(c);b.subscribe("dismiss",d,a);b.na();return b},O$=function(a){var b=a.Wb(),c=a.hd();a=a.fe();1<b.length&&(a=b[0].Ca().length);var d=new z.Iz;d.Uo(b[0].getName());d.fg(c);z.K(d,"endIndex",a);d.Mc(b[0].Ca().substring(c,a));return d},P$=function(a,
b){b%=a.F8;0>b&&(b=a.F8-1);a.qK=b;(b=a.query(".js-highlightTip"))&&z.S(b,SYa,{n3:a.qK,dB:a.H$})},Q$=function(a,b,c,d){z.T.call(this);this.Wa(this.nu(d));this.sb=a.get("dom-monitor");this.$a=b;this.M7=!b.Xa().Vs()||b.Xb();this.Za=b.Ia();this.Me=c;this.$d=a.get("quotes-data");this.Fi=a.get("responses-data");this.Ve=a.get("notes-data");this.pu=null;this.Wg={}},ZYa=function(a,b){b.forEach(function(a){a&&R$(this,a)},a)},R$=function(a,b){if(!a.pu)if(H$(a.Me,b)){var c=$Ya(a,b),c=aZa(a,c),c=bZa(a,c),c=cZa(a,
c);a.Wg[b]=c;dZa(a,b)}else delete a.Wg[b]},eZa=function(a,b){if(!a.pu){var c=a.Wg[b];if(c){var d=c.length,c=bZa(a,c),c=cZa(a,c);a.Wg[b]=c;d!=c.length?dZa(a,b):c.forEach(function(a){a.Qa&&a.offsetTop&&(a.Qa.style.top=a.offsetTop+"px")})}}},fZa=function(a,b,c){return z.Ta(a.Wg[b]||[],function(a){return a.Qa==c})},$Ya=function(a,b){var c=[];D$(a.Ve,b).ng(function(a){var e=a.Ez(),g;e?(g=this.Ve.EO(e),e=g.Ta(),g=z.I(g,"endIndex")):(e=0,g=a.Ua().length);c.push({anchor:b,startIndex:e,endIndex:g,notes:[a],
quotes:[],responses:[]})},a);if(a.M7)return c;(a.$d.hs[b]||[]).forEach(function(a){var e=gZa(a);c.push({anchor:b,startIndex:e.startIndex,endIndex:e.endIndex,notes:[],quotes:[a],responses:[]})},a);t$(a.Fi,b).forEach(function(a){var e=r$(a);e&&(e=s$(e)&&s$(e).Sm())&&(e=gZa(e),c.push({anchor:b,startIndex:e.startIndex,endIndex:e.endIndex,notes:[],quotes:[],responses:[a]}))},a);return c},aZa=function(a,b){var c=[];b.sort(function(a,b){return a.startIndex-b.startIndex});b.forEach(function(a){var b=z.Sa(c,
function(b){return b.endIndex>=a.startIndex-1&&b.startIndex<=a.endIndex+1});0<=b?this.qD(c[b],a):c.push(a)},a);return c},cZa=function(a,b){var c=[];b.forEach(function(a){if(a.offsetTop){var b=z.Sa(c,function(b){return 30>=Math.abs(b.offsetTop-a.offsetTop)});0<=b?this.qD(c[b],a):c.push(a)}},a);return c},dZa=function(a,b){a.lb(".js-paragraphControl-"+b).forEach(z.nh);a.Wg[b]=a.Wg[b].map(function(a){var b=hZa(this,a),b=z.lC(iZa,b);b.style.top=a.offsetTop+"px";a.Qa=b;this.la().appendChild(a.Qa);z.hd(b,
"is-visible");return a},a)},hZa=function(a,b){var c=b.notes,d=b.responses,e=n$(a.$d,b.quotes),g=d?d.length:0,h=c?c.length:0,l=0,q=0,r=0,u=!1,w=!1,D={},J={},Q=z.Dv().userId,N=a.$a.Xa().Ze().hb();c.forEach(function(a){var b=a.DF();b&&((a=z.I(a,"replies"))&&a.forEach(function(a){h++;a.author&&(a.author.userId==Q&&l++,a.author.social&&a.author.social.isFollowing&&(D[a.author.userId]=a.author),J[a.author.userId]=!0)}),J[b.userId]=!0,b.userId==Q&&l++,b.userId==N?q++:r++,b.social&&b.social.isFollowing&&
(D[b.userId]=b))});e.forEach(function(a){a=a.user;J[a.userId]=!0;a.userId==Q&&(u=!0);a.social&&a.social.isFollowing&&(D[a.userId]=a)});d.forEach(function(a){a=a.Ze();J[a.userId]=!0;a.userId==Q&&(w=!0);a.social&&a.social.isFollowing&&(D[a.userId]=a)});c=b.quotes.filter(function(a){return"anon"==a.hb()});return{postId:a.Za,iz:b.anchor,HAa:h,tBa:g,Iw:w,yw:l,Rda:q,IAa:r,xRa:e.length,Fw:u,zca:Object.keys(J).length,Bya:z.nb(D),dB:c.length}},gZa=function(a){var b=a.hd(),c=a.fe();1<a.paragraphs.length&&(c=
a.paragraphs[0].text.length);return{startIndex:b,endIndex:c}},bZa=function(a,b){var c=z.HC();return b.map(function(a){var b=this.Me.get(a.anchor),g=this.$a.ii(b);if(!g)return a;var h;4==g.type&&(g.Ca()&&(h=b.querySelector("figcaption")),h||(h=b));if(!h){g=a.startIndex+1;b=[b];h=0;for(var l=null;0<b.length&&h<g;)if(l=b.pop(),!(l.nodeName in z.aAa))if(3==l.nodeType){var q=l.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");h+=q.length}else if(l.nodeName in z.NT)h+=z.NT[l.nodeName].length;else for(q=
l.childNodes.length-1;0<=q;q--)b.push(l.childNodes[q]);h=l}g=z.KC(h,!0);a.offsetTop=Math.round(g.top+c.top);return a},a)},iZa=function(a,b,c){b=z.y;var d='\x3cdiv class\x3d"paragraphControls js-paragraphControl js-paragraphControl-'+z.F(a.iz)+' u-noUserSelect"\x3e',e=z.y,g;if(a.HAa||a.tBa){g='\x3cdiv class\x3d"notesMarker u-noUserSelect" data-action\x3d"select-anchor" data-action-value\x3d"'+z.F(a.iz)+'"\x3e';var h;h={};h=(0,z.y)(z.lm(z.C({name:"asteriskFilled",size:"19px",content:(0,z.O)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" viewBox\x3d"0 0 19 19" \x3e\x3cpath d\x3d"M14.78 8.07a8.681 8.681 0 0 0-.427-1.383.478.478 0 0 0-.584-.27l-3.12.77V4.034c0-.247-.19-.48-.43-.5a7.23 7.23 0 0 0-1.38 0c-.24.02-.43.253-.43.5V7.19L5.3 6.415a.48.48 0 0 0-.583.27c-.18.448-.324.91-.426 1.383-.05.24.1.5.32.58l3.06.754-1.98 2.956c-.14.196-.13.502.04.67.34.332.7.632 1.09.896.2.136.49.077.63-.117l2.09-3.114 2.09 3.112c.15.193.43.252.63.116.39-.26.75-.56 1.09-.89.17-.17.19-.47.04-.67L11.4 9.41l3.06-.76a.517.517 0 0 0 .32-.58" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
h)));g=g+z.A(h)+"\x3c/div\x3e"}else g="";var l=h="",q="",r=1==a.yw?z.n("a note"):z.n("notes"),q=q+(""+r),q=z.E(q);1==a.zca&&(0<a.yw||a.Fw||a.Iw)&&(0<a.yw&&a.Fw&&a.Iw?(q=z.n("highlighted, responded, and left {$noteCountText}",{noteCountText:""+q}),l+=" "+q):0<a.yw&&a.Iw?(q=z.n("responded and left {$noteCountText}",{noteCountText:""+q}),l+=" "+q):0<a.yw&&a.Fw?(q=z.n("highlighted and left {$noteCountText}",{noteCountText:""+q}),l+=" "+q):a.Fw&&a.Iw?(q=z.n("highlighted and responded"),l+=" "+q):a.Fw?
(q=z.n("highlighted"),l+=" "+q):0<a.yw?(q=z.n("left {$noteCountText}",{noteCountText:""+q}),l+=" "+q):a.Iw&&(q=z.n("responded"),l+=" "+q));l=z.E(l);h+='\x3cspan class\x3d"paragraphControls-itemText"\x3e';q="";if(0<a.Rda&&0==a.IAa&&!a.Fw&&!a.Iw)c=1==a.Rda?z.n("Note to self"):z.n("Notes to self"),q+=c;else{r="";if(0<a.dB)var u=z.n("Top highlight"),r=r+u;q+=z.A(z.MS(z.C({social:a.Bya,isActive:0<a.yw||a.Fw||a.Iw,Rh:a.zca,Q0:!0,TAa:!0,aba:(0,z.O)(r)},a),c));q+=z.A(l)}q=(0,z.O)(q);h+=z.A(z.nya(z.C({text:q},
a)))+"\x3c/span\x3e";a=(0,z.y)(h);a=e(g+a);return b(d+a+"\x3c/div\x3e")},S$=function(a,b,c){z.T.call(this);this.pa=a;this.nla=a.get("floating-components");this.La=a.get("screen");this.kb=a.get("screen-service");this.cF=a.get("uri-fragment");this.sb=a.get("dom-monitor");this.$a=b;this.zd=b.zd;this.un=this.zd.querySelector(".js-postField");this.W8=this.La.la().querySelector(".js-notesPositionContainer");this.$d=a.get("quotes-data");this.Ve=a.get("notes-data");this.Ve.subscribe("new_note_list",this.mpa,
this);this.Fi=a.get("responses-data");this.cl=null;this.Me=new DYa(this.zd.querySelector(".js-notesSource"));this.oD=this.Wg=this.nM=null;this.Wg=new Q$(a,b,this.Me,this.W8);this.track(this.Wg);this.oD=this.Wg.la();this.Uh=this.YV=null;this.pe=c},U$=function(a,b){if(a.isActive()){var c=(b=b||a.YV)&&b.fP,d=b&&b.noteId;c&&(a.dv(c),d&&a.Ve.yo(d,c)&&a.Uh&&z.t(a.Uh,function(){T$(this,c,null,d)},a));z.mha(a.cF.Ga,"")}else a.YV=b||null},T$=function(a,b,c,d,e,g){var h={Wi:!0,J0:z.pC()};a.zX();c=new M$(a.pa,
a.$a,b,d||"",c||null,a.Me,e||null,g||null);c.subscribe("set-active-highlight",a.O9,a);c.subscribe("reset-highlight",a.qsa,a);c.subscribe("close",a.zX,a);b=g&&g.Qa?g.Qa:a.Me.get(b);g=z.Moa(a.nla);g.Cm=b;b=g.fB(c);b.LE=h;h=b.qR(a.vm.bind(a));h.gM=!0;a.cl=h.na()},jZa=function(a,b,c){var d=a.$a.ii(H$(a.Me,b));if(d&&4!=d.type){z.Yx(d,4);if(c){if(!zYa(c,d))return;z.Wx(d,z.yx(c.startIndex,c.endIndex,c.id))}c=a.$a.Xb();var e=a.$a.Xa();c={mode:c?"edit":"view",Ti:z.py(e),media:null,Pk:null,sections:!0,Lj:!1,
Hj:!1,xk:!1,uf:!1,postId:e.id};a.Me.get(b).innerHTML=z.uz(d,z.Tr,c)}},kZa=function(a,b){var c=z.ft();if(!c||c.isCollapsed())if(b&&(c=b),!c||c.isCollapsed())return null;b=c.Lg();var d=FYa(a.Me,b);if(!d)return null;a=(b=z.fx(b,z.EG,d))&&a.$a.ii(b);if(!b)return null;var d=z.MC(c,b,!0),e=z.MC(c,b,!1);return-1==d||-1==e?null:new AYa(c,b,new z.Iz({anchor:b.getAttribute("name"),startIndex:d,endIndex:e,content:a.Ca().substring(d,e)}))},lZa=function(){},mZa=function(a,b,c){var d;b=(a.post.creator.userId==
c.currentUser.userId||(null==a.post.homeCollection?null:null==a.post.homeCollection.virtuals?null:null==a.post.homeCollection.virtuals.permissions?null:a.post.homeCollection.virtuals.permissions.canManageAll))&&a.post.virtuals.responsesCreatedCount>=c.j.Gea;d=""+('\x3cdiv class\x3d"container u-maxWidth740"\x3e\x3cdiv class\x3d"responsesStreamWrapper u-maxWidth640 u-hide js-responsesStreamWrapper"\x3e\x3cdiv class\x3d"container u-maxWidth640 responsesStream-title u-paddingTop15"\x3e\x3cdiv class\x3d"row"\x3e'+
z.A(z.zp({title:(0,z.O)(""+z.A(z.Do())),dA:!0,Df:(0,z.O)(""+(c.supportsEdit?b?z.A(z.vn({we:!0,action:"show-responses-stream-editor",l:"js-showResponsesStreamEditorButton",o:(0,z.O)(""+z.A(z.xya()))},c)):"":""))},c))+"\x3c/div\x3e\x3c/div\x3e");if(c.supportsEdit){var e;e=z.y;var g;c.isAuthenticated?g=z.A(z.Tya({Et:(0,z.O)(""+(a.post.virtuals.responsesCreatedCount?z.A(z.qU()):z.A(z.XBa())))},c)):(g=a||{},g=""+('\x3cdiv class\x3d"'+z.F(z.E("u-paddingTop30 u-paddingBottom30 u-paddingLeft0 u-paddingRight0 u-borderBottomLightest js-responsesLoggedOutPrompt"))+
'"\x3e'+z.A(z.zn({icon:(0,z.O)(""+z.A(z.$m())),sa:!0,Ng:!0,dc:!0,Sd:(0,z.M)(""+z.G(z.Vk(z.C({yQ:!0},g),0,c))),text:(0,z.O)(""+z.A(z.qU())),l:"button--loggedOutPrompt",source:"logged_out_response_prompt"},c))+"\x3c/div\x3e"),g=(0,z.y)(g));e=e(g);d+='\x3cdiv class\x3d"container u-maxWidth640 u-marginBottom30 responsesStream-editor cardChromeless'+(b?" u-hide":"")+' js-responsesStreamEditor"\x3e\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"col u-size12of12"\x3e'+e+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"}b&&
(b=d,d='\x3cdiv class\x3d"'+z.F(z.E("container u-maxWidth640 u-clearfix u-paddingTop25 u-paddingBottom25 u-fontSize14 u-textColorNormal streamItem-card streamItem-card--hPadding20 streamItem-card--borderRadius3 cardChromeless js-responseManagementCard"))+'"\x3e\x3cdiv class\x3d"u-size8of12"\x3e'+z.A(z.bCa({l:"responsesIcon u-accentColor--iconLight u-verticalAlignMiddle u-marginRight10"})),g=a.post.virtuals.responsesCreatedCount,e="",g=1==g?z.n("{$startBold}{$count}{$endBold} response to your story",
{startBold:"\x3cb\x3e",count:z.A(g),endBold:"\x3c/b\x3e"}):z.n("{$startBold}{$count}{$endBold} responses to your story",{startBold:"\x3cb\x3e",count:z.A(g),endBold:"\x3c/b\x3e"}),e+=g,e=(0,z.y)(e),d=d+z.A(e)+'\x3c/div\x3e\x3cdiv class\x3d"u-size4of12"\x3e\x3cspan class\x3d"u-floatRight u-marginTop4 u-marginLeft10"\x3e',a=(0,z.M)(""+z.G(z.BU(a,c))),e=z.n("Manage responses"),e=(0,z.y)(""+e),d=b+(d+z.A(z.P({href:a,o:(0,z.O)(""+z.A(e)),l:"link--accent u-accentColor--textNormal u-accentColor--textDarken"},
c))+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"));a=d;b='\x3cdiv class\x3d"container u-maxWidth640 u-marginBottom30 u-borderTopLighter u-hide js-noOtherResponses"\x3e\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"col u-size12of12"\x3e\x3cdiv class\x3d"u-paddingTop20 u-paddingBottom25"\x3e\x3cdiv class\x3d"u-inlineBlock u-verticalAlignTop u-paddingRight10"\x3e'+z.A(z.up({Jf:!0,Xe:!0},c))+'\x3c/div\x3e\x3cdiv class\x3d"u-inlineBlock"\x3e\x3cdiv class\x3d"u-lineHeight36 u-textColorNormal u-contentSerifRegular"\x3e';
d=z.n("No responses yet");d=(0,z.y)(""+d);b=b+z.A(d)+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"responsesStream js-responsesStream"\x3e\x3c/div\x3e\x3cdiv class\x3d"container u-maxWidth640 u-hide js-showOtherResponses"\x3e\x3cdiv class\x3d"row"\x3e';d=z.n("Show all responses");d=(0,z.y)(""+d);d=a+(b+z.A(z.vn({action:"show-other-responses",o:(0,z.O)(""+z.A(d)),isPrimary:!0,l:"responsesStream-showOtherResponses cardChromeless u-sizeFullWidth"},c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"responsesStream js-responsesStreamOther"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
return(0,z.y)(d)},V$=function(a){z.T.call(this);this.Ra=a.get("screen-request");this.wa=null;this.bZ=a.get("screen-view-state");this.pa=a;this.c$=this.$X=!1;this.OW=this.uc=null},W$=function(a){z.jD.call(this);this.ex=a},nZa=function(a,b,c){a=z.sa(a)?new z.Ld(a):a;(a=wYa(a,b,c||{}))&&(new W$(a)).focus()},X$=function(a){this.ma=a.get("request");this.cF=a.get("uri-fragment");this.ha=a.get("route-builder")},oZa=function(a,b){b=new z.Uk(b.authBaseUrl);return new z.Ld(b.Em(a))},pZa=function(a,b,c){b.content=
b.content.replace(/“/g,"‘").replace(/”/g,"’").replace(/„/g,"‚").replace(/'/g,"’");var d=String(a(b,null,c)),e=Y$(d)-140;0<e&&(b.content=z.lj(b.content,b.content.length-e),d=String(a(b,null,c)));return d},Y$=function(a){var b=a.length;a=a.match(qZa);if(!a)return b;for(var c=0;c<a.length;c++)b+=23-a[c].length;return b},Z$=function(a){z.Xr.call(this);this.pa=a;this.kC=a.get("dialog");this.ma=a.get("request");this.ha=a.get("route-builder");this.ra=a.get("butter-bar");this.ZE=this.xa=this.pv=this.wa=null;
this.vK=!1},sZa=function(a){var b=a.xa.query(".js-tweetEditor-image"),c=a.xa.query(".js-tweetEditor-imageContainer"),d=a.xa.query(".js-tweetEditor-imageStatus");z.hd(c,"u-hide");var e=rZa(a);e.base64=!0;z.v(z.t(a.ma.post(z.kC(iYa),e,{jz:!1,withCredentials:!1}),function(a){b.src="data:image/png;base64,"+a;z.kd(c,"u-hide");z.hd(d,"u-hide");this.vK=!0},a),function(a){z.fD(a);z.S(d,kYa)},a)},tZa=function(a,b){return 140>=Y$(b)?!0:(b=a.xa.query(".js-tweetEditor-text"),(new z.yD(b,{name:"shimmy-shake",
duration:400})).start(),a=a.xa.query(".js-tweetEditor-error"),z.S(a,oYa),!1)},rZa=function(a){var b=a.wa,c=a.pv.sCa;a=a.pv.rCa;var d=b.creator,e=b.approvedHomeCollection,g=z.Tr,h=null;e&&(h=e.image);var l=null;e&&e.logo&&e.logo.imageId&&(l=e.logo.imageId);var q=null;e&&e.tintColor&&2==e.colorBehavior&&e.logo&&e.logo.imageId&&(q=e.tintColor);var r=null;e&&e.tintColor&&(r=z.Oza(e.tintColor),r=z.Ww(r,.6).color);return new w$({content:c,altText:a,title:b.title,author:d&&d.name,date:z.gj(b.createdAt,g),
authorAvatarId:d&&d.imageId,collection:e&&e.name,collectionAvatarId:h?h.imageId:null,collectionLogoId:l,collectionBackgroundColor:q,collectionHighlightColor:r,version:2})},$$=function(a){this.ma=a.get("request");this.cF=a.get("uri-fragment");this.ha=a.get("route-builder");this.pa=a};z.p(l$,z.L);z.f=l$.prototype;z.f.aa=function(){return""};z.f.ba=function(){return"Placement"};z.f.di=function(){return z.I(this,"items")};z.f.xd=z.k(415);z.f.JA=function(a){return z.K(this,"location",a)};z.f.Ed=z.k(450);
z.f.Ob=function(a){return z.K(this,"index",a)};z.f.ea=function(){return l$.prototype};z.f.ca={name:"Placement",fa:!1,fields:{items:{name:"items",g:function(){return z.cQ},oa:z.V,h:1},location:{name:"location",g:function(){return z.Gwa},h:2},index:{name:"index",g:z.X,h:3}},ga:{}};z.f.Ed=z.Y(450,function(){return z.I(this,"index")});z.f.xd=z.Y(415,function(a){return z.K(this,"items",a)});z.m(o$,z.Ee);o$.prototype.Cj=function(a){var b={};z.fJ(this,b,a.Yb(),"");return b};
o$.prototype.Ab=function(a,b){if(!a||!b)return null;var c=new a;Object.keys(b).forEach(function(a){for(var e=a.split(/[[\]]+/).filter(function(a){return!!a}),g=c,h=e.shift();h;){var l=z.Vj(g,h);if(!l)break;var q=l.g();if(l.oa()){var r=z.Qj(g,h)||[],u=e.shift(),w=Number(u);if(void 0===u||!Number.isInteger(w)||0>w)break;if(q.prototype instanceof z.sj)l=r[w],l||(l=new q,r[w]=l),z.K(g,h,r),g=l;else{if(void 0!==e.shift())break;q=QXa(b[a],l);r[w]=q;z.K(g,h,r)}}else if(q.prototype instanceof z.sj)r=z.Qj(g,
h),r||(r=new q,z.K(g,h,r)),g=r;else{if(void 0!==e.shift())break;q=QXa(b[a],l);z.K(g,h,q)}h=e.shift()}});return c};z.p(p$,z.bk);z.f=p$.prototype;z.f.aa=function(){return""};z.f.ba=function(){return""};z.f.VO=z.k(600);z.f.ea=function(){return p$.prototype};z.f.ca={name:"PlacementsResponse",fa:!1,fields:{placements:{name:"placements",g:function(){return l$},oa:z.V,h:1}},ga:{}};z.p(q$,z.L);q$.prototype.aa=function(){return""};q$.prototype.ba=function(){return""};q$.prototype.ea=function(){return q$.prototype};
q$.prototype.ca={name:"PlacementsRequestQuery",fa:!1,fields:{requestContext:{name:"requestContext",g:function(){return z.WH},h:1},slots:{name:"slots",g:function(){return z.YH},oa:z.V,h:2}},ga:{}};z.$Z.prototype.HQ=z.Y(615,function(a){a!=this.IK&&this.nb&&(this.nb.ph.contentEditable=a);this.IK=a});z.ZK.prototype.N_=z.Y(607,function(a){a=r$(a);if(!a)return null;a=s$(a)&&s$(a).Sm();return a?(a=a.Wb())&&a.length?a[0].getName():null:null});z.CJ.prototype.qR=z.Y(606,function(a){this.vm=a;return this});
z.lL.prototype.qR=z.Y(605,function(a){this.vm=a;return this});p$.prototype.VO=z.Y(600,function(){return z.I(this,"placements")});z.gJ.prototype.VO=z.Y(599,function(a,b){var c=this;a=SXa(TXa(new q$,a),b);a=(new o$).Cj(a);var d=this.ha.ia(z.aqa,{},a);return z.hJ(this,d,function(){return z.t(c.ma.get(d,{background:!0}),function(a){a=c.Aa.Nb(p$,a);c.ua.Pb(a);return a})})});z.KD.prototype.yo=z.Y(497,function(){return z.I(this,"note")});z.cJ.prototype.yo=z.Y(496,function(a){return this.ic("Note",a)});
z.Gz.prototype.Yv=z.Y(474,function(){return z.I(this,"replyId")});z.KD.prototype.Yv=z.Y(473,function(){return z.I(this,"replyId")});z.Ez.prototype.Pw=z.Y(472,function(a){return z.K(this,"highlight",a)});z.Ez.prototype.EO=z.Y(471,function(){return z.I(this,"highlight")});z.Ez.prototype.Jt=z.Y(470,function(a){return z.K(this,"author",a)});z.Gz.prototype.Jt=z.Y(469,function(a){return z.K(this,"author",a)});z.Ez.prototype.DF=z.Y(468,function(){return z.I(this,"author")});
z.Gz.prototype.DF=z.Y(467,function(){return z.I(this,"author")});z.Ez.prototype.Ez=z.Y(466,function(){return z.I(this,"highlightId")});z.Ez.prototype.FA=z.Y(465,function(a){return z.K(this,"authorId",a)});z.Gz.prototype.FA=z.Y(464,function(a){return z.K(this,"authorId",a)});z.Ez.prototype.Uw=z.Y(463,function(a){return z.K(this,"state",a)});z.Gz.prototype.Uw=z.Y(462,function(a){return z.K(this,"state",a)});z.DD.prototype.Uw=z.Y(461,function(a){return z.K(this,"state",a)});
z.Ez.prototype.Xf=z.Y(460,function(){return z.I(this,"noteId")});z.Gz.prototype.Xf=z.Y(459,function(){return z.I(this,"noteId")});z.KD.prototype.Xf=z.Y(458,function(){return z.I(this,"noteId")});z.sv.prototype.Vd=z.Y(370,function(){return z.I(this,"catalogId")});z.zO.prototype.Vd=z.Y(369,function(){return z.I(this,"catalogId")});z.sO.prototype.Vd=z.Y(368,function(){return z.I(this,"catalogId")});z.qO.prototype.Vd=z.Y(367,function(){return z.I(this,"catalogId")});
z.cQ.prototype.Vd=z.Y(366,function(){return z.I(this,"catalogId")});z.XN.prototype.Vd=z.Y(365,function(){return z.I(this,"catalogId")});z.LP.prototype.Vd=z.Y(364,function(){return z.I(this,"catalogId")});z.NO.prototype.Vd=z.Y(363,function(){return z.I(this,"catalogId")});z.DP.prototype.Vd=z.Y(362,function(){return z.I(this,"catalogId")});z.CP.prototype.Vd=z.Y(361,function(){return z.I(this,"catalogId")});z.BP.prototype.Vd=z.Y(360,function(){return z.I(this,"catalogId")});
z.nw.prototype.Vd=z.Y(359,function(){return z.I(this,"catalogId")});z.uQ.prototype.Vd=z.Y(358,function(){return z.I(this,"catalogId")});z.KD.prototype.Vd=z.Y(357,function(){return z.I(this,"catalogId")});z.LL.prototype.Vd=z.Y(356,function(){return z.I(this,"catalogId")});z.Zt.prototype.WO=z.Y(84,function(){return z.I(this,"point")});z.gk.prototype.Rm=z.Y(21,function(){return z.I(this,"offset")});z.cK.prototype.Rm=z.Y(20,function(){return this.pL});
u$.prototype.WO=function(){var a=window.document.body;return z.th(a,this.wh.node)?this.wh:this.Wj&&z.th(a,this.Wj)?z.RQ(this.pL,this.Wj):this.oe&&(a=z.jx(this.jla,this.oe))?z.RQ(this.pL,a):null};z.p(v$,z.ls);v$.prototype.hH=function(){if(!this.pj)return null;var a=this.pj.WO();if(!a)return null;var b=this.gl.WO();return b?z.Ts(a.node,a.offset,b.node,b.offset):null};z.p(w$,z.L);z.f=w$.prototype;z.f.aa=function(){return""};z.f.ba=function(){return""};z.f.Ua=function(){return z.I(this,"content")};
z.f.Mc=function(a){return z.K(this,"content",a)};z.f.Hb=function(){return z.I(this,"title")};z.f.Vc=function(a){return z.K(this,"title",a)};z.f.DF=function(){return z.I(this,"author")};z.f.Jt=function(a){return z.K(this,"author",a)};z.f.getDate=function(){return z.I(this,"date")};z.f.setDate=function(a){return z.K(this,"date",a)};z.f.ub=function(){return z.I(this,"collection")};z.f.setVersion=function(a){return z.K(this,"version",a)};z.f.Q2=function(a){return z.K(this,"template",a)};
z.f.mf=function(){return z.I(this,"subtitle")};z.f.ui=function(a){return z.K(this,"subtitle",a)};z.f.ea=function(){return w$.prototype};
z.f.ca={name:"TextshotInfo",fa:!1,fields:{content:{name:"content",g:z.W,h:1},altText:{name:"altText",g:z.W,h:2},title:{name:"title",g:z.W,h:3},author:{name:"author",g:z.W,h:4},date:{name:"date",g:z.W,h:5},authorAvatarId:{name:"authorAvatarId",g:z.W,h:6},collection:{name:"collection",g:z.W,h:7},collectionAvatarId:{name:"collectionAvatarId",g:z.W,h:8},collectionLogoId:{name:"collectionLogoId",g:z.W,h:9},collectionBackgroundColor:{name:"collectionBackgroundColor",g:z.W,h:10},collectionHighlightColor:{name:"collectionHighlightColor",
g:z.W,h:11},version:{name:"version",g:z.X,h:12},base64:{name:"base64",g:z.TL,h:13},template:{name:"template",g:z.W,h:14},mainStat:{name:"mainStat",g:z.W,h:15},mainStatTitle:{name:"mainStatTitle",g:z.W,h:16},subtitle:{name:"subtitle",g:z.W,h:17},icon:{name:"icon",g:z.W,h:18},imgKey:{name:"imgKey",g:z.W,h:19}},ga:{}};z.p(x$,z.T);z.f=x$.prototype;z.f.Ej=function(){return this.sm.Ej()};
z.f.ka=function(){x$.qa.ka.call(this);z.lD(this,this.QU,"data-redirect-type-quote",this.xoa,this);this.Ka(this.zd,"click",this.zu,this);z.wK(this.$a)&&z.nC()&&this.Ka(this.zd,"mouseover",this.$la,this);this.$a.Xa().Vs()&&!this.$a.Xb()&&z.v(this.$d.load(this.$a.Ia()),z.fD);var a=this.Ej();a&&(z.lD(this,a,"quote",this.Vla,this),z.lD(this,a,"quote-respond",this.Wla,this),z.lD(this,a,"show",this.RY,this),z.lD(this,a,"hide",this.Qoa,this))};
z.f.xoa=function(a){var b=z.nK(this.sm,this.Ej().mv);b&&(a.url=new z.Ld(this.ha.ia(z.$sa,{postId:this.$a.Ia()},{paragraphs:JSON.stringify([b.ew.Ab().Yb()]),startOffset:b.start,endOffset:b.end})))};z.f.zu=function(a){z.fx(a.target,function(a){if(a===this.zd)return!0;var c=z.NG(a);if(3==c)return!0;if(7==c){if(c=sYa(this,a))if(y$(this,c),z.nC())A$(this,c);else{var d=new z.fI;qYa(this,c,a,d)}return!0}return!1}.bind(this))};
z.f.$la=function(a){z.fx(a.target,function(a){if(a===this.zd)return!0;var c=z.NG(a);if(3==c)return!0;if(7==c){c=z.ft();if(!(c&&!c.isCollapsed()||this.Ej()&&this.Ej().Tl())&&(c=sYa(this,a))){var d=this.zd.querySelector('.markup--quote[name~\x3d"'+c.ji()+'"]');a=new z.xJ(a,100);qYa(this,c,d,a);y$(this,c)}return!0}return!1}.bind(this))};
z.f.RY=function(){var a=z.ft();a&&!a.isCollapsed()&&y$(this,null);z.wK(this.$a)&&(a=z.nK(this.sm,this.Ej().mv))&&(a=z.Sma(this.$d,a.ew,a.start,a.end),z.md(this.Ej().Pa().querySelector(".js-highlightMenuQuoteButton"),"is-active",!!a))};z.f.Qoa=function(){this.bo&&y$(this,null)};
z.f.Vla=function(){if(z.wK(this.$a)){var a=z.iK(this.Ej());if(a){var b=a.range,c=a.Rza,d=z.gd(this.Ej().Pa().querySelector(".js-highlightMenuQuoteButton"),"is-active"),a=z.nK(this.sm,b);z.v(z.t(this.$d.toggle(a.ew,a.start,a.end,!c),function(a){z.Sza();d?z.kK(this.Ej()):A$(this,a);var b=c?"selection_menu":"quote_click_menu";B$(this,a.ji(),!d,b)},this),z.fD)}}};
z.f.Wla=function(){if(z.wK(this.$a)&&z.Tr.supportsEdit){var a=z.iK(this.Ej());if(a){var b=z.nK(this.sm,a.range);z.v(z.t(this.$d.create(b.ew,b.start,b.end,1,!0),function(a){B$(this,a.ji(),!0,"selection_menu_quote_respond");this.va("quote-respond",a,b.ew.name)},this),z.fD)}}};
z.f.gma=function(a){var b=this.bo,c=z$(this,b),d=b.hd(),e=b.fe(),b=a.query(".js-quoteAttributions-pileOn"),g=z.gd(b,"is-active");z.v(z.t(this.$d.toggle(c,d,e,!0),function(b){var l=a.query(".js-quoteAttributions-pileOn");z.nd(l,"is-active");if(l=z.eK(this.$d,c,d,e)){var q=pYa(this,l),r=a.query(".js-quoteAttributions-info");z.S(r,cYa,q)}else a.Bc();!g&&z.nC()&&(a.Bc(),A$(this,l));l=z.nC()?"quote_hover":"quote_click_mobile";B$(this,b.ji(),!g,l)},this),z.fD)};
z.f.hma=function(){if(z.wK(this.$a)&&z.Tr.supportsEdit){var a=z$(this,this.bo),b=this.bo.hd(),c=this.bo.fe();z.v(z.t(this.$d.create(a,b,c,1,!0),function(b){B$(this,b.ji(),!0,"quote_respond");this.va("quote-respond",b,a.name)},this),z.fD)}};z.f.ima=function(){var a=uYa(this,this.bo);a&&z.bna(this.sm,a)};
z.f.F9=function(){var a=new v$(this.zd),b=this.$d.hs,c=Object.keys(b).concat(this.f6);z.eb(c);c.forEach(function(a){var c=b[a]||[],g=this.$a;if(g=(a=g.zd&&z.jx(g.zd,a))&&this.$a.ii(a))bYa(g,c),a.innerHTML=z.uz(g,z.Tr,z.hna(this.$a)),z.Voa(this.xra,a)},this);this.f6=Object.keys(b);(a=a.restore())&&a.select()};z.p(C$,z.jD);z.f=C$.prototype;
z.f.load=function(a){if(!z.Fv())return z.Zc([]);this.Za=a;this.Tg||(this.Tg=z.v(z.t(this.wm.get(this.ha.ia(z.Ssa,{postId:a}),{background:!0}),this.vra,this),z.fD));return this.Tg.Ic()};z.f.Lo=function(){return this.c6};z.f.Kl=function(){return this.c9};z.f.EO=function(a){return this.t7[a]||null};z.f.yo=function(a,b){return z.uR(D$(this,b),a)};z.f.Pw=function(a,b){this.t7[a]=b};z.f.Ia=function(){return this.Za};
z.f.vra=function(a){var b=a.references.User;this.c9=a.post.visibility;var c=a.value;if(c)for(var d=0;d<c.length;d++){var e=c[d];if("HIDDEN"!=e.state){var g=e.replies,h=b;if(g)for(var l=0;l<g.length;l++){var q=g[l],r=q.authorId||null;q.author=r&&h[r]||null}g=e.anchor;h=e.authorId||null;e.author=h&&b[h]||null;g=D$(this,g);e=z.Fz(e);g.add(z.yH(this.ua,e))}}if(a=a.highlights)for(b=0;b<a.length;b++)this.Pw(a[b].id,z.St.Ab(z.Iz,a[b]));this.c6=!0};z.m(G$,z.T);G$.prototype.ka=function(){var a=this;z.T.prototype.ka.call(this);z.t(this.Ra.VO(this.iM,this.ira),function(b){b.placements&&b.placements.forEach(a.Oma,a)})};
G$.prototype.Oma=function(a){if(this.isActive()){var b=null;switch(a.location){case 1:b=this.La.query(".js-postFooterPlacements");if(!b)break;z.S(b,z.dT,{items:a.items,context:9});z.U(b).w("show-more-recommendations",this.Qta,this);break;case 2:b=this.La.query(".js-readNextMetabarRight");if(!b)break;z.S(b,z.dT,{items:a.items,context:2});break;case 6:(b=this.La.query(".js-postPromotionWrapper"))&&z.S(b,z.dT,{items:a.items,context:2})}b&&BYa(this,b)}};
G$.prototype.Qta=function(a){z.RD(z.swa,{});var b=this.La.query(".js-moreRecommendations");b&&(z.mx(b),z.lx(a.target))};CYa.prototype.bO=function(a,b,c){return new x$(a,b,c)};DYa.prototype.get=function(a){return H$(this,a)};z.p(I$,z.$Z);z.f=I$.prototype;z.f.mE=!1;z.f.hy="";z.f.nE=0;z.f.Rl=z.V;z.f.Xf=function(){return this.rW};z.f.save=function(){this.Ua().length<=this.ll&&this.rk()};z.f.Bb=function(){(0,window.clearTimeout)(this.nE);I$.qa.Bb.call(this)};
z.f.ka=function(){function a(a){a.stopPropagation()}I$.qa.ka.call(this);this.hy=this.Ua();this.Mc(this.hy);this.xv(13,this.wW,this);this.xv(27,this.xW,this);this.nb.Ka("blur",this.vW,!1,this);var b=this.nb.Pa();z.zC(b,"keydown",a);z.zC(b,"keyup",a);z.zC(b,"keypress",a)};z.f.W1=function(a){return a};
z.f.rk=function(){if(this.isEnabled()){var a=this.Ua().trim();if(a){this.HQ(!1);var b=this.Uba(),a=this.Tba(a);this.va("saving",a);z.Rc(z.v(z.t(this.wm.post(b,a.Yb()),this.qpa,this),this.opa.bind(this,a)),this.HQ.bind(this,!0))}}};z.f.qpa=function(a){this.va("save",this.W1(a.value))};z.f.opa=function(a,b){this.va("fail",a);this.xa.error(GYa());z.fD(b)};z.f.wW=function(a){if(this.vs&&z.O_(this.vs))return!1;a.shiftKey||(a.preventDefault(),this.save());return!0};
z.f.xW=function(a){if(this.vs&&z.O_(this.vs))return!1;a.preventDefault();this.Mc(this.hy);this.va("cancel");return!1};z.f.vW=function(){this.mE&&(this.Ua().length>=this.ll?(0,window.confirm)(this.Wba())?(this.Mc(this.hy),this.va("cancel")):this.focus():this.nE=(0,window.setTimeout)(this.rk.bind(this),100))};z.p(J$,I$);z.f=J$.prototype;z.f.XS=null;z.f.w5=null;z.f.YS=null;z.f.ij=null;z.f.mV=null;z.f.lV=null;z.f.s7=null;z.f.Pw=function(a){this.ij=a;this.mV=a.startIndex;this.lV=a.endIndex;this.s7=a.content;return this};z.f.Wba=function(){var a=z.n("Your note is too long; do you want to abandon your changes?");return(0,z.y)(""+a)};z.f.W1=function(a){var b=z.iC();a=z.Fz(a).Jt(b).FA(b.hb());this.ij&&a.Ez()&&this.Ve.Pw(a.Ez(),this.ij);var b=this.Ve,c;c=z.yH(b.ua,a);D$(b,c.Ud()).add(c);return a};
z.f.Uba=function(){return this.Xf()?this.ha.ia(z.Tsa,{postId:this.Za,noteId:this.Xf()}):this.ha.ia(z.Rsa,{postId:this.Za})};z.f.Tba=function(a){var b=z.iC();a=(new z.Ez({content:a,anchor:this.XS,anchorContent:this.w5,anchorImage:this.YS?this.YS.Yb():null,replies:[],createdAt:Date.now()})).Jt(b);null!=this.mV&&null!=this.lV&&(b=new z.Iz({anchor:this.XS,startIndex:this.mV,endIndex:this.lV,content:this.s7}),a.Pw(b));return a};z.p(K$,I$);K$.prototype.Wba=function(){var a=z.n("Your reply is too long; do you want to abandon your changes?");return(0,z.y)(""+a)};K$.prototype.W1=function(a){var b=z.iC();a=z.Hz(a).Jt(b).FA(b.hb());z.I(this.Ve.yo(a.Xf(),this.oe),"replies").push(a);return a};K$.prototype.Uba=function(){return this.B9?this.ha.ia(z.Wsa,{postId:this.Za,noteId:this.Xf(),replyId:this.B9}):this.ha.ia(z.Vsa,{postId:this.Za,noteId:this.Xf()})};
K$.prototype.Tba=function(a){var b=z.iC();return(new z.Gz({replyId:"",postId:this.Za,noteId:this.Xf(),content:a,createdAt:Date.now()})).Jt(b)};z.p(M$,z.T);z.f=M$.prototype;
z.f.ka=function(){M$.qa.ka.call(this);z.U(this.la()).w("show-note-editor",this.cY,this).w("hide-note-editor",this.iV.bind(this,!0)).w("show-reply-editor",this.dua,this).w("hide-reply-editor",this.Bma,this).w("save-note",this.Hsa,this).w("save-reply",this.Jsa,this).w("highlight-quote",this.Ema,this).w("dismiss-note",this.j6.bind(this,!0),this).w("delete-note",this.j6.bind(this,!1),this).w("delete-reply",this.ska,this).w("previous-highlight-tip",this.tra,this).w("next-highlight-tip",this.boa,this);
UYa(this);this.Fi&&m$(this.Fi)&&(TYa(this),z.lD(this,m$(this.Fi),"add",this.npa,this));if(this.sX&&this.E7&&this.G7){var a=this.query(".js-inlineNewPostControl"),b=this.sX,c=this.$a.Ia(),d=new z.rV(this.pa);d.qH("web-inline-quote-responses");d.Wa(a);d.mC=!0;d.aU=!0;d.ZT=!0;d.Q2(dYa);d.gy=b;d.uH(c);z.sV(d,!0);this.uc=d;this.uc.na();a=O$(this.XD);this.va("set-active-highlight",this.oe,a)}this.ij&&(this.cY(),this.sf&&this.sf.focus());P$(this,0)};
z.f.ya=function(){this.yp&&this.yp.h_();(this.ij||this.XD)&&this.va("reset-highlight",this.oe,null);M$.qa.ya.call(this)};z.f.Bb=function(){z.ZD(this.la());z.nh(this.la());z.Zr(this.uc);z.Zr(this.sf);z.Zr(this.yp);z.$r(z.nb(this.lj));this.yp=this.lj=this.sf=this.uc=null;M$.qa.Bb.call(this)};z.f.Ym=function(){if(this.sf&&this.sf.Ua())return!0;for(var a=z.nb(this.lj),b=0;b<a.length;b++)if(a[b]&&a[b].Ua())return!0;return this.uc&&!this.uc.isDismissable()?!0:!1};
z.f.nu=function(){var a=[],b=[],c=[],d=this.ky&&(this.ij||this.XD);d||(this.Hu?(a=this.$d?n$(this.$d,this.Hu.quotes):[],b=this.Hu.notes,c=this.Hu.responses):(b=this.Ve?z.GH(D$(this.Ve,this.oe)):[],this.rW||(this.$d?(a=this.$d,a=n$(a,a.hs[this.oe]||[])):a=[],c=this.Fi?t$(this.Fi,this.oe):[])));return z.lC(QYa,{post:this.$a.Xa(),quotes:a,notes:b,responses:c,A3:!!this.sX,QQ:d,AH:this.ky,dB:this.H$,JAa:z.vK(this.$a)})};
z.f.npa=function(){var a=this.query(".js-postList"),b=z.lC(PYa,{responses:t$(this.Fi,this.oe)});z.oh(b,a);TYa(this)};
z.f.cY=function(){if(this.ky){if(!this.sf){var a=this.query(".js-noteEditor"),b=z.kC(NYa),a=this.sf=new J$(this.pa,a,this.$a.Ia(),null,b),b=this.oe,c=this.$a.ii(this.Me.get(this.oe)),d=c.Ca(),c=4==c.type?c.Wd():null;a.XS=b;a.w5=d;a.YS=c;(a=this.ij)&&this.sf.Pw(a);z.lD(this,this.sf,"saving",this.Vpa,this);z.lD(this,this.sf,"fail",this.Ooa,this);z.lD(this,this.sf,"save",this.Ppa,this)}z.hd(this.query(".js-noteActions"),"is-noteEditorVisible");this.sf&&this.sf.focus()}};z.f.Hsa=function(){this.sf&&this.sf.save()};
z.f.Vpa=function(a){this.sf.Mc("");var b=this.query(".js-notesList");a={note:a,post:this.$a.Xa(),QQ:this.ky,AH:this.ky};a=z.lC(L$,a);b.appendChild(a);z.kd(b,"is-empty");UYa(this);this.iV()};z.f.Ppa=function(a){var b=this.query(".js-notesList").lastChild;a=a.Xf();z.hd(b,"js-note-"+a);b.setAttribute("data-note-id",a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};z.f.Ooa=function(){var a=this.query(".js-notesList");a.removeChild(a.lastChild);z.hd(a,"is-empty");this.cY()};
z.f.iV=function(a){a?this.va("close"):this.sf&&(this.sf.Ua()&&this.sf.Mc(""),z.kd(this.query(".js-noteActions"),"is-noteEditorVisible"))};z.f.dua=function(a){(a=N$(a.target))&&this.ky&&VYa(this,a)};z.f.Jsa=function(a){a=N$(a.target);(a=this.lj[a])&&a.save()};
z.f.Wpa=function(a){var b=a.Xf();this.lj[b]&&this.lj[b].Mc("");var c=this.Ve.yo(b,this.oe).author.userId==a.author.userId,d=this.query(".js-note-"+a.Xf()+" .js-repliesList");a={note:a,post:this.$a.Xa(),Zca:c};a=z.lC(L$,a);d.appendChild(a);z.kd(d,"is-empty");WYa(this,b)};z.f.Qpa=function(a){var b=this.query(".js-note-"+a.Xf()).querySelector(".js-repliesList").lastChild;a=a.Yv();z.hd(b,"js-reply-"+a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};
z.f.Poa=function(a){var b=this.query(".js-note-"+a.Xf()+" .js-repliesList");b.removeChild(b.lastChild);z.hd(b,"is-empty");VYa(this,a.Xf())};z.f.Bma=function(a){(a=N$(a.target))&&WYa(this,a)};z.f.Ema=function(a){a=a.target;var b=a.getAttribute("data-quote-creator-id"),c=H$(this.Me,this.oe);c&&(this.yp&&this.yp.h_(),this.yp=YYa(this,c,a,function(){XYa(this,b,!1);z.Zr(this.yp);this.yp=null}),XYa(this,b,!0))};
z.f.Dma=function(a){var b=H$(this.Me,this.oe);(a=this.Ve.yo(a.target.getAttribute("data-note-id"),this.oe))&&b&&(b=(b=a.Ez())?this.Ve.EO(b):null,this.va("set-active-highlight",this.oe,b))};z.f.Fma=function(a){var b=H$(this.Me,this.oe),c;c=this.Fi;a=a.target.getAttribute("data-post-id");c=m$(c)?z.uR(m$(c),a):null;b&&c&&(b=r$(c))&&(b=s$(b)&&s$(b).Sm())&&(c=b.Wb())&&c.length&&(b=O$(b),this.va("set-active-highlight",this.oe,b))};
z.f.QY=function(){var a=null;this.XD&&(a=O$(this.XD));this.ij&&(a=this.ij);this.va("reset-highlight",this.oe,a)};
z.f.j6=function(a,b){b=b.value;var c=this.Ve.yo(b,this.oe),d=this.query(".js-note-"+b);if(c&&d){z.lx(d);this.QY();this.lb(".js-note-item").every(function(a){return z.gd(a,"u-hide")})&&this.iV(!0);var e=E$(this.Ve,c,"HIDDEN");z.v(e.zk,function(b){this.ra.na(a?HYa():IYa(),"error");e.iH();z.mx(d);(400>b.status||499<b.status)&&E$(this.Ve,c,"NEW")},this);z.t(this.ra.na(a?KYa():LYa(),{type:"success",eB:!0}),function(){this.ra.Bc();e.iH();E$(this.Ve,c,"NEW");z.mx(d)},this)}};
z.f.ska=function(a){var b=a.value,c=this.query(".js-reply-"+b),d=N$(a.target);if(d&&c){z.lx(c);var e=F$(this.Ve,b,d,this.$a.Ia(),this.oe,"HIDDEN");z.v(e.zk,function(){this.ra.na(JYa(),"error");e.iH();z.mx(c);F$(this.Ve,b,d,this.$a.Ia(),this.oe,"")},this);z.t(this.ra.na(MYa(),{type:"success",eB:!0}),function(){this.ra.Bc();e.iH();F$(this.Ve,b,d,this.$a.Ia(),this.oe,"");z.mx(c)},this)}};z.f.tra=function(){P$(this,this.qK-1)};z.f.boa=function(){P$(this,this.qK+1)};z.p(Q$,z.T);z.f=Q$.prototype;z.f.ka=function(){Q$.qa.ka.call(this);var a=[];z.vK(this.$a)&&a.push(this.Ve.load(this.Za));this.M7||(a.push(this.$d.load(this.Za)),a.push(this.Fi.load(this.Za)));this.pu=z.t(z.t(z.t(z.kU(a),function(){this.pu=null},this),this.wQ,this),this.oja,this);z.lD(this,this.sb,"resize-end",this.Nf,this)};z.f.ya=function(){this.pu&&this.pu.cancel();Q$.qa.ya.call(this)};z.f.Bb=function(){this.pu=null;Q$.qa.Bb.call(this)};z.f.wQ=function(){EYa(this.Me,function(a,b){R$(this,b)},this)};
z.f.Nf=function(){EYa(this.Me,function(a,b){eZa(this,b)},this)};z.f.oja=function(){var a=this.$d.Sn;z.lD(this,a,"add",this.M8,this);z.lD(this,a,"remove",this.M8,this);(a=m$(this.Fi))&&z.lD(this,a,"add",this.Mpa,this)};z.f.M8=function(a){ZYa(this,Object.keys(z.Wma(this.$d,a instanceof Array?a:[a])))};z.f.Mpa=function(a){ZYa(this,(a instanceof Array?a:[a]).map(this.Fi.N_,this.Fi))};z.f.nu=function(a){var b=window.document.createElement("div");b.className="notesMarkers";a.appendChild(b);return b};
z.f.qD=function(a,b){z.vb(a,{startIndex:Math.min(a.startIndex,b.startIndex),endIndex:Math.max(a.endIndex,b.endIndex),notes:a.notes.concat(b.notes),quotes:a.quotes.concat(b.quotes),responses:a.responses.concat(b.responses)})};z.p(S$,z.T);z.f=S$.prototype;
z.f.ka=function(){S$.qa.ka.call(this);this.Ka(this.La.la(),"click",this.Fna,this,!0);z.U(this.oD).w("select-anchor",this.Xpa,this);var a=this.$a.Xa();if(a.Vs()&&!this.$a.Xb()){var b=z.nv(a),b=2==a.visibility&&b&&!z.I(b.Co(),"memberOfMembershipPlanId");a.allowResponses&&!b&&z.v(this.Fi.load(this.$a.Ia(),"best"),z.fD);z.v(this.$d.load(this.$a.Ia()),z.fD)}a.Co().zF()&&(this.nL=z.t(this.Ve.load(this.$a.Ia()),this.rpa,this));this.YV&&U$(this);z.lD(this,this.kb,"historyUpdate",function(){U$(this,z.xK())},
this);this.pe&&z.lD(this,this.pe,"highlight",this.ppa,this)};z.f.Bb=function(){z.Zr(this.Wg);this.Wg=null;z.Zr(this.cl);this.cl=null;this.oD&&z.U(this.oD).clear("select-anchor");this.nL&&this.nL.cancel();this.nL=null;S$.qa.Bb.call(this)};z.f.PAa=function(a,b){T$(this,b,null,null,a)};z.f.ECa=function(){this.Wg&&this.Wg.Nf()};z.f.Ym=function(){if(!this.cl)return!1;var a=this.cl.Ua();return a?a.Ym():!1};z.f.mpa=function(a){a.subscribe("add",this.P$,this);a.subscribe("remove",this.P$,this)};
z.f.P$=function(a){(z.pa(a)?a:[a]).forEach(function(a){R$(this.Wg,a.Ud())},this)};z.f.rpa=function(){var a=(0,z.Ka)();this.nL=null;U$(this,z.xK());this.Ka(this.un,z.rM,this.IW,this);z.GE("notes.renderMarkers",(0,z.Ka)()-a)};z.f.IW=function(a){(a=a.target.getAttribute("name"))&&H$(this.Me,a)&&eZa(this.Wg,a)};z.f.ppa=function(){if(this.pe){var a=kZa(this,this.pe.mv);z.kK(this.pe);a&&(a=a.highlight,this.O9(a.anchor,a),T$(this,a.anchor,a))}};
z.f.Fna=function(a){if(this.cl){var b=a.target;if(!z.th(this.cl.la(),b)){var c=this.cl.Ua(),d;if(!(d=!c)){a:if(c.sf&&c.sf.Ua())c=!0;else{d=z.nb(c.lj);for(var e=0;e<d.length;e++)if(d[e]&&d[e].Ua()){c=!0;break a}c=c.uc&&!c.uc.li()?!0:!1}d=!c}d&&(c=this.cl&&this.cl.Cm,d="select-anchor"==b.getAttribute("data-action"),this.zX(),c&&d&&z.th(c,b)&&a.stopPropagation())}}};
z.f.vm=function(a){if(!z.pC()){var b=a.Cm,c=z.KC(b);a.Dk();a=a.la();var d=z.KC(a),e=window.innerHeight,g=window.innerWidth,h=this.La.query(".js-metabar"),l=0;h&&(l=z.KC(h).height);d.height>=e-l?xYa(a):(z.GC(b),b=c.top+d.height>=e?z.HC().top+e-d.height-10:z.GC(b),c=z.KC(this.oD).left+10,c+d.width>=g&&(c=g-d.width-10),a.style.top=b+"px",a.style.left=c+"px")}};z.f.zX=function(){z.Zr(this.cl);this.cl=null};
z.f.Xpa=function(a){var b=z.fx(a.target,function(a){return z.gd(a,"js-paragraphControl")},this.W8),b=fZa(this.Wg,a.value,b);T$(this,a.value,null,null,null,b)};z.f.O9=function(a,b){if(this.$a.Xb()){var c=z.ft();this.nM=(c=c&&FYa(this.Me,c.Lg()))&&new v$(c)}jZa(this,a,b)};z.f.qsa=function(a,b){jZa(this,a,b);this.$a.Xb()&&this.nM&&(a=this.nM.restore())&&a.select();this.nM=null};
z.f.dv=function(a){if(this.Me&&(a=H$(this.Me,a))){a=Math.max(z.GC(a),0);var b=window.document.body;this.Uh&&this.Uh.cancel();this.Uh=new z.qC(b,"scrollTop",600,a)}};lZa.prototype.bO=function(a,b,c){return new S$(a,b,c)};z.m(V$,z.T);z.f=V$.prototype;z.f.bd=function(a){this.wa=a};z.f.QBa=function(a){this.$X=a};z.f.RBa=function(a){this.c$=a};z.f.ka=function(){this.la()?(z.T.prototype.ka.call(this),z.U(this.la()).w("show-other-responses",this.i$,this),z.S(this.la(),mZa,{post:this.wa}),this.wa.Vs()&&z.v(z.t(z.t(z.t(aYa(this.Ra,this.wa.zb(),"best"),this.y9.bind(this,"best")),this.$ra,this),function(){this.bZ.Z2&&this.i$()},this),z.fD)):z.fD("Attempted to initialize ResponsesStreamControl without root element.")};
z.f.ya=function(){z.U(this.la()).clear("show-other-responses");z.T.prototype.ya.call(this)};z.f.y9=function(a,b){this.isActive()&&(b=b.Gd,"best"==a?(a=this.query(".js-responsesStream"),z.lD(this,b,"add",this.o8.bind(this,b)),this.o8(b)):a=this.query(".js-responsesStreamOther"),b&&(z.Hv()||0<b.se())&&a&&(z.S(a,z.dT,{items:z.GH(b),context:2}),b=new z.GV(this.pa,b),b.Wa(a),b.Qe(2),this.track(b),z.mx(this.query(".js-responsesStreamWrapper"))),this.c$&&(a=z.GC(a),z.DC(window.document.body,0,a)))};
z.f.$ra=function(){var a=this.query(".js-inlineNewPostControl"),b=this.query(".js-responsesLoggedOutPrompt");z.Hv()?a?(this.uc=z.sV(UXa((new z.rV(this.pa)).qH("web-inline-post-response").uH(this.wa.zb()),z.jC(z.Vk,{post:this.wa,yQ:!0})),this.$X).Wa(a),this.track(this.uc)):b&&this.$X&&(a=z.FC(b),b=z.GC(b),z.DC(a,0,b)):b&&z.hd(b,"u-hide")};
z.f.i$=function(){this.OW||(this.OW=z.Rc(z.t(z.t(aYa(this.Ra,this.wa.zb(),"other"),this.y9.bind(this,"other")),function(){z.lx(this.query(".js-showOtherResponses"));this.bZ.Z2=!0},this),function(){this.OW=null},this))};z.f.o8=function(a){(a=a.jk)&&a.next&&"other"==a.next.filter&&!this.bZ.Z2&&(z.mx(this.query(".js-responsesStreamWrapper")),z.mx(this.query(".js-showOtherResponses")))};z.f.Lv=function(){this.uc&&(z.ZT(this.uc.la(),new z.nt(60,0,200,0)),this.uc.Lv())};z.p(W$,z.jD);W$.prototype.focus=function(){this.isActive&&this.ex.focus()};W$.prototype.close=function(){this.ex&&!this.ex.closed&&this.ex.close();this.va("close");this.vf()};W$.prototype.isActive=function(){return this.ex?!this.ex.closed:!1};W$.prototype.Na=function(){this.ex=null;W$.qa.Na.call(this)};X$.prototype.NQ=function(a,b,c){var d;d=z.Tr;var e=new z.Uk(z.Sr(d)),e=new z.Ld(e.Em(a));d=fYa(e,d);this.LD(d);z.RD(z.wN,{postId:a.id,type:b,source:c,dest:"facebook",dialogType:"native"})};X$.prototype.U2=function(a){var b;b=z.Tr;var c=new z.Uk(z.Sr(b));a=new z.Ld(c.ia(z.mB,{catalogSlug:a.Vd(),username:a.Ze().Gk()}));b=fYa(a,b);this.LD(b)};X$.prototype.K_=function(){var a=this.ha.ia(z.xsa);return this.ma.get(a)};X$.prototype.LD=function(a){nZa(a,"facebook-share",{width:550,height:320})};var qZa=/(?:https?:\/\/|www\.)\w[\w~#-@![\]]*/g;z.p(Z$,z.Xr);
Z$.prototype.open=function(a,b){this.wa=a;this.pv=b;this.xa=this.kC.open({bodyHtml:z.jC(lYa,this.pv),type:"tweet"},!0);a=this.xa.query(".js-tweetEditor-text");b=this.pa;var c=String,d;d=z.n("Enter tweet text.");d=(0,z.y)(""+d);this.ZE=new z.q1(b,a,c(d),!0);a=new z.M0(140,!0);a.V5=Y$;this.ZE.Va(a);a=pZa(hYa,this.pv,z.Tr);this.ZE.Mc(a);this.ZE.focus();sZa(this);z.U(this.xa.Zb).w("remove-textshot",this.T9.bind(this,!1),this).w("add-textshot",this.T9.bind(this,!0),this).w("toggle-expand-image",this.Yua,
this);this.xa.subscribe("submit",this.Fva.bind(this))};Z$.prototype.Fva=function(){var a=this.ZE.Ua();if(tZa(this,a)){var b=this.vK?rZa(this):null;z.v(z.t(this.ma.post(this.ha.ia(z.vsa),{tweet:a,textshotInfo:b}),function(a){a=z.kC(jYa,{id:a.value});a=z.jC(nYa,{zCa:a});this.ra.na(a,{type:"success",$o:1E4})},this),function(a){z.fD(a);this.ra.na(mYa(),"error")},this);z.AE(z.dva,{postId:this.wa.id,type:this.pv.shareType,source:this.pv.VBa,dest:"twitter",style:this.vK?"textshot":null});this.xa.close()}};
Z$.prototype.T9=function(a){this.vK=a;z.md(this.xa.query(".js-tweetEditor-imageContainer"),"u-hide",!a);z.md(this.xa.query(".js-tweetEditor-addTextshot"),"u-hide",a)};Z$.prototype.Yua=function(){var a=this.xa.query(".js-tweetEditor-image");z.nd(a,"tweetEditor-image--expanded")};$$.prototype.UBa=function(a,b){var c=z.Dv(),d=a.creator||{},e=ZXa(b),g=YXa(b),h=oZa(a,z.Tr);(b=yYa($Xa(b)))&&z.Td(h,b||"");var l={name:d.name||"",username:d.username||"",twitterScreenName:d.twitterScreenName||"",url:h.toString(),content:a.title,user:c,sCa:e,rCa:g,shareType:"highlight",VBa:"highlight_menu"};z.v(z.t(this.pa.load("tweet-dialog"),function(b){b.open(a,l)}),z.fD);z.AE(z.wN,{postId:a.id,type:"highlight",source:"highlight_menu",dest:"twitter",dialogType:"inapp"});return!0};
$$.prototype.NQ=function(a,b,c,d,e){var g=z.Dv().userId,h="highlight"==c?hYa:z.tna,l=z.Tr,q=a.creator||{};b={content:b,name:q.name||"",username:q.username||"",twitterScreenName:q.twitterScreenName||"",vaa:q.userId==g,url:oZa(a,l).toString(),collaborators:d||[]};d=d&&d.length?String(h(b,null,l)):pZa(h,b,l);h=new z.Ld("https://twitter.com/intent/tweet");z.he(h,"text",d);this.LD(h);z.RD(z.wN,{postId:a.id,type:c,source:e,dest:"twitter",dialogType:"native"})};
$$.prototype.U2=function(a){var b=z.Tr,c=new z.Uk(z.Sr(b)),c=(new z.Ld(c.ia(z.mB,{catalogSlug:a.Vd(),username:a.Ze().Gk()}))).toString();a=z.B(""+z.Ao(String(a.name))+((null==a.creator?null:a.creator.userId)!=b.currentUser.userId?" — "+z.GK({twitterScreenName:null==a.creator?null:a.creator.twitterScreenName,name:null==a.creator?null:a.creator.name}):"")+" "+(""+c));b=new z.Ld("https://twitter.com/intent/tweet");z.he(b,"text",a);this.LD(b)};
$$.prototype.LD=function(a){nZa(a,"twitter-share",{width:670,height:420})};var uZa=z.jE,vZa=uZa.Ea();vZa.scope("screen").add("quotes",CYa).add("quote-responses",lZa).add("responses-stream-control",V$).add("notes-data",C$);z.mE(vZa.scope("app"),"PlacementsControl",G$).add("twitter",$$).add("facebook",X$).add("tweet-dialog",Z$);z.vR(uZa,"notes");}).call(this, _mdm);
